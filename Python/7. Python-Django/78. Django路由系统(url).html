<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>78. Django路由系统(url) | MSG</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="在追寻技术的同时享受生活">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.d65bef42.js" as="script"><link rel="preload" href="/assets/js/2.2249178e.js" as="script"><link rel="preload" href="/assets/js/151.17af677c.js" as="script"><link rel="prefetch" href="/assets/js/10.4785e2e5.js"><link rel="prefetch" href="/assets/js/100.33fceff2.js"><link rel="prefetch" href="/assets/js/101.62e1e5d4.js"><link rel="prefetch" href="/assets/js/102.8551fe71.js"><link rel="prefetch" href="/assets/js/103.47754d79.js"><link rel="prefetch" href="/assets/js/104.4adf114f.js"><link rel="prefetch" href="/assets/js/105.6206a08a.js"><link rel="prefetch" href="/assets/js/106.1c4561f3.js"><link rel="prefetch" href="/assets/js/107.e1531a5a.js"><link rel="prefetch" href="/assets/js/108.c637743a.js"><link rel="prefetch" href="/assets/js/109.3f150913.js"><link rel="prefetch" href="/assets/js/11.bd8ec7a6.js"><link rel="prefetch" href="/assets/js/110.088c1ac3.js"><link rel="prefetch" href="/assets/js/111.66d8d491.js"><link rel="prefetch" href="/assets/js/112.231663ee.js"><link rel="prefetch" href="/assets/js/113.a38bc531.js"><link rel="prefetch" href="/assets/js/114.e165daea.js"><link rel="prefetch" href="/assets/js/115.994b087a.js"><link rel="prefetch" href="/assets/js/116.ea3cfdfb.js"><link rel="prefetch" href="/assets/js/117.7be5e4f3.js"><link rel="prefetch" href="/assets/js/118.ebb58ddb.js"><link rel="prefetch" href="/assets/js/119.90018646.js"><link rel="prefetch" href="/assets/js/12.0d8f43df.js"><link rel="prefetch" href="/assets/js/120.bb5be863.js"><link rel="prefetch" href="/assets/js/121.3d1db670.js"><link rel="prefetch" href="/assets/js/122.d29ed1b2.js"><link rel="prefetch" href="/assets/js/123.38cc4704.js"><link rel="prefetch" href="/assets/js/124.cc8549d4.js"><link rel="prefetch" href="/assets/js/125.6ee3e9c8.js"><link rel="prefetch" href="/assets/js/126.48710eba.js"><link rel="prefetch" href="/assets/js/127.d7a1fd83.js"><link rel="prefetch" href="/assets/js/128.e5017f6b.js"><link rel="prefetch" href="/assets/js/129.4c33e121.js"><link rel="prefetch" href="/assets/js/13.2dbde7aa.js"><link rel="prefetch" href="/assets/js/130.cda66247.js"><link rel="prefetch" href="/assets/js/131.ad76f669.js"><link rel="prefetch" href="/assets/js/132.aca88758.js"><link rel="prefetch" href="/assets/js/133.a1cf5903.js"><link rel="prefetch" href="/assets/js/134.b1386377.js"><link rel="prefetch" href="/assets/js/135.94edcf53.js"><link rel="prefetch" href="/assets/js/136.24be4170.js"><link rel="prefetch" href="/assets/js/137.db57772e.js"><link rel="prefetch" href="/assets/js/138.dc67bcaa.js"><link rel="prefetch" href="/assets/js/139.5453d1f6.js"><link rel="prefetch" href="/assets/js/14.2187dbf4.js"><link rel="prefetch" href="/assets/js/140.938e5c07.js"><link rel="prefetch" href="/assets/js/141.99c7cf2c.js"><link rel="prefetch" href="/assets/js/142.428e3958.js"><link rel="prefetch" href="/assets/js/143.68b01530.js"><link rel="prefetch" href="/assets/js/144.f67389cc.js"><link rel="prefetch" href="/assets/js/145.d952a130.js"><link rel="prefetch" href="/assets/js/146.b933dcad.js"><link rel="prefetch" href="/assets/js/147.2d8e4c0a.js"><link rel="prefetch" href="/assets/js/148.6d76ac94.js"><link rel="prefetch" href="/assets/js/149.6b4d6378.js"><link rel="prefetch" href="/assets/js/15.a53b356c.js"><link rel="prefetch" href="/assets/js/150.5bf39cb4.js"><link rel="prefetch" href="/assets/js/152.7f1c2792.js"><link rel="prefetch" href="/assets/js/153.98dd0727.js"><link rel="prefetch" href="/assets/js/154.eb44bf23.js"><link rel="prefetch" href="/assets/js/155.5a9840ea.js"><link rel="prefetch" href="/assets/js/156.7ba01fd0.js"><link rel="prefetch" href="/assets/js/157.2296a048.js"><link rel="prefetch" href="/assets/js/158.6bb1f699.js"><link rel="prefetch" href="/assets/js/159.073bb8df.js"><link rel="prefetch" href="/assets/js/16.cef7bf44.js"><link rel="prefetch" href="/assets/js/160.25a837f9.js"><link rel="prefetch" href="/assets/js/161.93d886a1.js"><link rel="prefetch" href="/assets/js/162.5d2714b2.js"><link rel="prefetch" href="/assets/js/17.96f36904.js"><link rel="prefetch" href="/assets/js/18.fd04b310.js"><link rel="prefetch" href="/assets/js/19.3e1377d1.js"><link rel="prefetch" href="/assets/js/20.ac195ac8.js"><link rel="prefetch" href="/assets/js/21.c2d7729c.js"><link rel="prefetch" href="/assets/js/22.dd8c621b.js"><link rel="prefetch" href="/assets/js/23.ad7d0350.js"><link rel="prefetch" href="/assets/js/24.8559c4c3.js"><link rel="prefetch" href="/assets/js/25.783a8116.js"><link rel="prefetch" href="/assets/js/26.25e0e459.js"><link rel="prefetch" href="/assets/js/27.c0616e2a.js"><link rel="prefetch" href="/assets/js/28.30656c2e.js"><link rel="prefetch" href="/assets/js/29.2be5114c.js"><link rel="prefetch" href="/assets/js/3.be8c8f3b.js"><link rel="prefetch" href="/assets/js/30.230a74a7.js"><link rel="prefetch" href="/assets/js/31.760f46ad.js"><link rel="prefetch" href="/assets/js/32.c9533fef.js"><link rel="prefetch" href="/assets/js/33.dcacfb38.js"><link rel="prefetch" href="/assets/js/34.4370a466.js"><link rel="prefetch" href="/assets/js/35.bf299eea.js"><link rel="prefetch" href="/assets/js/36.336e435a.js"><link rel="prefetch" href="/assets/js/37.1d1d2eea.js"><link rel="prefetch" href="/assets/js/38.0d58b7d0.js"><link rel="prefetch" href="/assets/js/39.d43564ba.js"><link rel="prefetch" href="/assets/js/4.4a6cb970.js"><link rel="prefetch" href="/assets/js/40.bc4e4bde.js"><link rel="prefetch" href="/assets/js/41.b71231a5.js"><link rel="prefetch" href="/assets/js/42.9d46f400.js"><link rel="prefetch" href="/assets/js/43.50c5be69.js"><link rel="prefetch" href="/assets/js/44.60406e7f.js"><link rel="prefetch" href="/assets/js/45.ec3569ae.js"><link rel="prefetch" href="/assets/js/46.1bd3ce7b.js"><link rel="prefetch" href="/assets/js/47.1e1b5326.js"><link rel="prefetch" href="/assets/js/48.64c631ea.js"><link rel="prefetch" href="/assets/js/49.b4abacd8.js"><link rel="prefetch" href="/assets/js/5.e6d0b165.js"><link rel="prefetch" href="/assets/js/50.c3e320c0.js"><link rel="prefetch" href="/assets/js/51.5ec7fb8c.js"><link rel="prefetch" href="/assets/js/52.2d234f86.js"><link rel="prefetch" href="/assets/js/53.f3b69623.js"><link rel="prefetch" href="/assets/js/54.c85ff450.js"><link rel="prefetch" href="/assets/js/55.b07597b5.js"><link rel="prefetch" href="/assets/js/56.444129cf.js"><link rel="prefetch" href="/assets/js/57.df1329ba.js"><link rel="prefetch" href="/assets/js/58.5afb51cf.js"><link rel="prefetch" href="/assets/js/59.d98936d9.js"><link rel="prefetch" href="/assets/js/6.809376cd.js"><link rel="prefetch" href="/assets/js/60.02813ecf.js"><link rel="prefetch" href="/assets/js/61.37a4812d.js"><link rel="prefetch" href="/assets/js/62.5da94048.js"><link rel="prefetch" href="/assets/js/63.8e2c2bca.js"><link rel="prefetch" href="/assets/js/64.d290398f.js"><link rel="prefetch" href="/assets/js/65.44e28313.js"><link rel="prefetch" href="/assets/js/66.9acf0206.js"><link rel="prefetch" href="/assets/js/67.85688aa2.js"><link rel="prefetch" href="/assets/js/68.45bda7fc.js"><link rel="prefetch" href="/assets/js/69.9074feb0.js"><link rel="prefetch" href="/assets/js/7.5d7bce6e.js"><link rel="prefetch" href="/assets/js/70.b4cd2ddc.js"><link rel="prefetch" href="/assets/js/71.53219b13.js"><link rel="prefetch" href="/assets/js/72.af2a7290.js"><link rel="prefetch" href="/assets/js/73.c28fc506.js"><link rel="prefetch" href="/assets/js/74.64c81a90.js"><link rel="prefetch" href="/assets/js/75.05191ece.js"><link rel="prefetch" href="/assets/js/76.f516d464.js"><link rel="prefetch" href="/assets/js/77.c345180b.js"><link rel="prefetch" href="/assets/js/78.4a09d0ba.js"><link rel="prefetch" href="/assets/js/79.65f41bcf.js"><link rel="prefetch" href="/assets/js/8.f6cfdc07.js"><link rel="prefetch" href="/assets/js/80.b77151f3.js"><link rel="prefetch" href="/assets/js/81.824fa371.js"><link rel="prefetch" href="/assets/js/82.3f91c09b.js"><link rel="prefetch" href="/assets/js/83.9539f074.js"><link rel="prefetch" href="/assets/js/84.dd89f1de.js"><link rel="prefetch" href="/assets/js/85.15210b99.js"><link rel="prefetch" href="/assets/js/86.e14553e1.js"><link rel="prefetch" href="/assets/js/87.6dc95177.js"><link rel="prefetch" href="/assets/js/88.09c5e890.js"><link rel="prefetch" href="/assets/js/89.0d61f4d0.js"><link rel="prefetch" href="/assets/js/9.759f1986.js"><link rel="prefetch" href="/assets/js/90.a9b14d80.js"><link rel="prefetch" href="/assets/js/91.1a4aabe2.js"><link rel="prefetch" href="/assets/js/92.12070bdb.js"><link rel="prefetch" href="/assets/js/93.b5dc76d0.js"><link rel="prefetch" href="/assets/js/94.690498a6.js"><link rel="prefetch" href="/assets/js/95.b17961e6.js"><link rel="prefetch" href="/assets/js/96.a2f06f3e.js"><link rel="prefetch" href="/assets/js/97.64ef6721.js"><link rel="prefetch" href="/assets/js/98.443eba26.js"><link rel="prefetch" href="/assets/js/99.b6ba7c3a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MSG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python文档" class="dropdown-title"><span class="title">Python文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python文档" class="mobile-dropdown-title"><span class="title">Python文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Python/1.Python-Basics/" class="nav-link">
  Python-基础
</a></li><li class="dropdown-item"><!----> <a href="/Python/2. Python-object/" class="nav-link">
  Python-面向对象
</a></li><li class="dropdown-item"><!----> <a href="/Python/3. Python-module/" class="nav-link">
  Python-模块与包
</a></li><li class="dropdown-item"><!----> <a href="/Python/4. Python-network/" class="nav-link">
  Python-网络
</a></li><li class="dropdown-item"><!----> <a href="/Python/5. Python-frontend/" class="nav-link">
  Python-前端
</a></li><li class="dropdown-item"><!----> <a href="/Python/6. Python-MySQL/" class="nav-link">
  Python-数据库
</a></li><li class="dropdown-item"><!----> <a href="/Python/7. Python-Django/" class="nav-link">
  Python-Django
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="容器文档" class="dropdown-title"><span class="title">容器文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="容器文档" class="mobile-dropdown-title"><span class="title">容器文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Container/docker/" class="nav-link">
  docker文檔
</a></li><li class="dropdown-item"><!----> <a href="/Container/Kubernetes/" class="nav-link">
  Kubernetes文檔
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GO文档" class="dropdown-title"><span class="title">GO文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="GO文档" class="mobile-dropdown-title"><span class="title">GO文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/GO/basics/" class="nav-link">
  GO快速入门
</a></li><li class="dropdown-item"><!----> <a href="/GO/module/" class="nav-link">
  GO标准库/GO模块
</a></li></ul></div></div><div class="nav-item"><a href="https://www.linux91.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python文档" class="dropdown-title"><span class="title">Python文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python文档" class="mobile-dropdown-title"><span class="title">Python文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Python/1.Python-Basics/" class="nav-link">
  Python-基础
</a></li><li class="dropdown-item"><!----> <a href="/Python/2. Python-object/" class="nav-link">
  Python-面向对象
</a></li><li class="dropdown-item"><!----> <a href="/Python/3. Python-module/" class="nav-link">
  Python-模块与包
</a></li><li class="dropdown-item"><!----> <a href="/Python/4. Python-network/" class="nav-link">
  Python-网络
</a></li><li class="dropdown-item"><!----> <a href="/Python/5. Python-frontend/" class="nav-link">
  Python-前端
</a></li><li class="dropdown-item"><!----> <a href="/Python/6. Python-MySQL/" class="nav-link">
  Python-数据库
</a></li><li class="dropdown-item"><!----> <a href="/Python/7. Python-Django/" class="nav-link">
  Python-Django
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="容器文档" class="dropdown-title"><span class="title">容器文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="容器文档" class="mobile-dropdown-title"><span class="title">容器文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Container/docker/" class="nav-link">
  docker文檔
</a></li><li class="dropdown-item"><!----> <a href="/Container/Kubernetes/" class="nav-link">
  Kubernetes文檔
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GO文档" class="dropdown-title"><span class="title">GO文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="GO文档" class="mobile-dropdown-title"><span class="title">GO文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/GO/basics/" class="nav-link">
  GO快速入门
</a></li><li class="dropdown-item"><!----> <a href="/GO/module/" class="nav-link">
  GO标准库/GO模块
</a></li></ul></div></div><div class="nav-item"><a href="https://www.linux91.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python-Django</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Python/7.%20Python-Django/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/Python/7. Python-Django/68. request相关的属性.html" class="sidebar-link">68. request相关的属性</a></li><li><a href="/Python/7. Python-Django/69. WEB框架的本质.html" class="sidebar-link">69. WEB框架的本质</a></li><li><a href="/Python/7. Python-Django/70. Django框架、基础.html" class="sidebar-link">70. Django框架、基础</a></li><li><a href="/Python/7. Python-Django/71. Django图书馆之出版社的增删改查 - 单表.html" class="sidebar-link">71. Django图书馆之出版社的增删改查 - 单表</a></li><li><a href="/Python/7. Python-Django/72. Django图书馆之书籍的增删改查 - 多表(外键).html" class="sidebar-link">72. Django图书馆之书籍的增删改查 - 多表(外键)</a></li><li><a href="/Python/7. Python-Django/73. Django图书馆之作者的增删改查 - 多对多关系表.html" class="sidebar-link">73. Django图书馆之作者的增删改查 - 多对多关系表</a></li><li><a href="/Python/7. Python-Django/74. Django简单上传文件.html" class="sidebar-link">74. Django简单上传文件</a></li><li><a href="/Python/7. Python-Django/75. Django模板语言之变量.html" class="sidebar-link">75. Django模板语言之变量</a></li><li><a href="/Python/7. Python-Django/76. Django模板语言之逻辑.html" class="sidebar-link">76. Django模板语言之逻辑</a></li><li><a href="/Python/7. Python-Django/77. Django视图、request方法大全.html" class="sidebar-link">77. Django视图、request方法大全</a></li><li><a href="/Python/7. Python-Django/78. Django路由系统(url).html" class="active sidebar-link">78. Django路由系统(url)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#urlconf配置" class="sidebar-link">URLconf配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#基本格式" class="sidebar-link">基本格式</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#参数说明" class="sidebar-link">参数说明</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#django1-11跟2-0版本写法的区别" class="sidebar-link">Django1.11跟2.0版本写法的区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#正则表达式详解" class="sidebar-link">正则表达式详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#基本配置" class="sidebar-link">基本配置</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#注意事项" class="sidebar-link">注意事项</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#关闭django自补充访问链接结束后面的反斜杠" class="sidebar-link">关闭Django自补充访问链接结束后面的反斜杠</a></li></ul></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#分组命名匹配" class="sidebar-link">分组命名匹配</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#urlconf匹配的位置" class="sidebar-link">URLconf匹配的位置</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#捕获的参数永远都是字符串" class="sidebar-link">捕获的参数永远都是字符串</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#视图函数中指定默认值" class="sidebar-link">视图函数中指定默认值</a></li></ul></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#路由文件按项目分发方式" class="sidebar-link">路由文件按项目分发方式</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#传递额外固定的参数给视图函数-了解" class="sidebar-link">传递额外固定的参数给视图函数（了解）</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#命名url和url反向解析" class="sidebar-link">命名URL和URL反向解析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#练习题" class="sidebar-link">练习题</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#注意事项-2" class="sidebar-link">注意事项</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/78. Django路由系统(url).html#命名空间模式" class="sidebar-link">命名空间模式</a></li></ul></li><li><a href="/Python/7. Python-Django/79. Django模型(ORM) 认识、字段.html" class="sidebar-link">79. Django模型(ORM) 认识、字段</a></li><li><a href="/Python/7. Python-Django/80. Django模型(ORM) 操作、进阶.html" class="sidebar-link">80. Django模型(ORM) 操作、进阶</a></li><li><a href="/Python/7. Python-Django/81. Django - Cookie、Session、自定义分页.html" class="sidebar-link">81. Django - Cookie、Session、自定义分页</a></li><li><a href="/Python/7. Python-Django/82. Django - 中间件.html" class="sidebar-link">82. Django - 中间件</a></li><li><a href="/Python/7. Python-Django/83. Django - ajax、csrf中间件补充.html" class="sidebar-link">83. Django - ajax、csrf中间件补充</a></li><li><a href="/Python/7. Python-Django/84. Django - Form、ModelForm.html" class="sidebar-link">84. Django - Form、ModelForm</a></li><li><a href="/Python/7. Python-Django/85. Django - auth认证组件.html" class="sidebar-link">85. Django - auth认证组件</a></li><li><a href="/Python/7. Python-Django/86. 权限控制.html" class="sidebar-link">86. 权限控制</a></li><li><a href="/Python/7. Python-Django/87. django小技巧.html" class="sidebar-link">87. django小技巧</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content__default"><h1 id="_78-django路由系统-url"><a href="#_78-django路由系统-url" class="header-anchor">#</a> 78. Django路由系统(url)</h1> <h1 id="django的路由系统"><a href="#django的路由系统" class="header-anchor">#</a> Django的路由系统</h1> <p><a href="https://docs.djangoproject.com/en/1.11/topics/http/urls/" target="_blank" rel="noopener noreferrer">Django 1.11版本 URLConf官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>URL配置(URLconf)就像Django所支撑网站的目录。它的本质是URL与要为该URL调用的视图函数之间的映射表。</p> <p>我们就是以这种方式告诉Django，遇到哪个URL的时候，要对应执行哪个函数。</p> <h2 id="urlconf配置"><a href="#urlconf配置" class="header-anchor">#</a> URLconf配置</h2> <h3 id="基本格式"><a href="#基本格式" class="header-anchor">#</a> 基本格式</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
     url<span class="token punctuation">(</span>正则表达式<span class="token punctuation">,</span> views视图，参数，别名<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="参数说明"><a href="#参数说明" class="header-anchor">#</a> 参数说明</h3> <p><strong>参数说明：(正则表达式, views视图，参数，别名)</strong></p> <ol><li>正则表达式：一个正则表达式字符串</li> <li>views视图：一个可调用对象，通常为一个视图函数</li> <li>参数：可选的要传递给视图函数的默认参数（字典形式）</li> <li>别名：一个可选的name参数</li></ol> <h3 id="django1-11跟2-0版本写法的区别"><a href="#django1-11跟2-0版本写法的区别" class="header-anchor">#</a> Django1.11跟2.0版本写法的区别</h3> <p><strong>Django 1.11版本中的路由系统是下面的写法（<a href="https://docs.djangoproject.com/en/1.11/topics/http/urls/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）：</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/2003/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>special_case_2003<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>year_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/([0-9]{2})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>month_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_detail<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>Django 2.0版本中的路由系统是下面的写法（<a href="https://docs.djangoproject.com/en/2.0/topics/http/urls/" target="_blank" rel="noopener noreferrer">官方文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）：</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> path，re_path

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    path<span class="token punctuation">(</span><span class="token string">'articles/2003/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>special_case_2003<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'articles/&lt;int:year&gt;/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>year_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'articles/&lt;int:year&gt;/&lt;int:month&gt;/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>month_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
    path<span class="token punctuation">(</span><span class="token string">'articles/&lt;int:year&gt;/&lt;int:month&gt;/&lt;slug:slug&gt;/'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_detail<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>2.0版本中re_path和1.11版本的url是一样的用法。</p> <h2 id="正则表达式详解"><a href="#正则表达式详解" class="header-anchor">#</a> 正则表达式详解</h2> <h3 id="基本配置"><a href="#基本配置" class="header-anchor">#</a> 基本配置</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url

<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/2003/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>special_case_2003<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>year_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/([0-9]{2})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>month_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/([0-9]{2})/([0-9]+)/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_detail<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h3> <ol><li>urlpatterns中的元素按照书写顺序从上往下逐一匹配正则表达式，一旦匹配成功则不再继续。</li> <li>若要从URL中捕获一个值，只需要在它周围放置一对圆括号（分组匹配）下面有写。</li> <li>不需要添加一个前导的反斜杠，因为每个URL 都有。例如，应该是^articles 而不是 ^/articles。</li> <li>但是需要在后面加个反斜杠，例如，应该是^articles/ 而不是 ^articles，不然会报错。</li> <li>每个正则表达式前面的  ' r '  是可选的但是建议加上。</li></ol> <h3 id="关闭django自补充访问链接结束后面的反斜杠"><a href="#关闭django自补充访问链接结束后面的反斜杠" class="header-anchor">#</a> 关闭Django自补充访问链接结束后面的反斜杠</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 关闭URL访问地址后面不为/跳转至带有/的路径的配置项</span>
APPEND_SLASH<span class="token operator">=</span><span class="token boolean">False</span>
</code></pre></div><p>Django settings.py配置文件中默认没有 APPEND_SLASH 这个参数，但 Django 默认这个参数为 APPEND_SLASH = True。 其作用就是自动在网址结尾加'/'。</p> <p>其效果就是：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> app01 <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^blog/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>blog<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>访问 http://www.example.com/blog 时，默认将网址自动转换为 http://www.example/com/blog/ 。</p> <p>如果在settings.py中设置了 <strong>APPEND_SLASH=False</strong>，此时我们再请求 http://www.example.com/blog 时就会提示找不到页面。</p> <h2 id="分组命名匹配"><a href="#分组命名匹配" class="header-anchor">#</a> 分组命名匹配</h2> <p>上面的示例使用简单的正则表达式分组匹配（通过圆括号）来捕获URL中的值并以位置参数形式传递给视图。</p> <p>在更高级的用法中，可以使用分组命名匹配的正则表达式组来捕获URL中的值并以关键字参数形式传递给视图。</p> <p>在Python的正则表达式中，分组命名正则表达式组的语法是<code>(?P&lt;名称&gt;</code>，其中<code>name</code>是组的名称，<code>&lt;名称&gt;</code>是要匹配的模式。</p> <p>下面是以上URLconf 使用命名组的重写：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url

<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/2003/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>special_case_2003<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/(?P&lt;year&gt;[0-9]{4})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>year_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[0-9]{2})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>month_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[0-9]{2})/(?P&lt;day&gt;[0-9]{2})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>article_detail<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">## () 中的为分组，默认会把分组中的数据，当前普通参数转递到后端函数中，要保证后端有可以接收的参数，（*args）</span>
<span class="token comment">## (?P&lt;名称&gt;)  给分组起名称，传递的方式就变成，关键字参数传递到后端，要保证后端有可以接收的参数，（**kwargs）</span>
</code></pre></div><p>这个实现与前面的示例完全相同，只有一个细微的差别：捕获的值作为关键字参数而不是位置参数传递给视图函数。</p> <p>例如，针对URL /articles/2017/12/相当于按以下方式调用视图函数：</p> <div class="language-python extra-class"><pre class="language-python"><code>views<span class="token punctuation">.</span>month_archive<span class="token punctuation">(</span>request<span class="token punctuation">,</span> year<span class="token operator">=</span><span class="token string">&quot;2017&quot;</span><span class="token punctuation">,</span> month<span class="token operator">=</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>在实际应用中，使用分组命名匹配的方式可以让你的URLconf 更加明晰且不容易产生参数顺序问题的错误，但是有些开发人员则认为分组命名组语法太丑陋、繁琐。</p> <p>至于究竟应该使用哪一种，你可以根据自己的喜好来决定。</p> <h3 id="urlconf匹配的位置"><a href="#urlconf匹配的位置" class="header-anchor">#</a> URLconf匹配的位置</h3> <p>URLconf 在请求的URL 上查找，将它当做一个普通的Python 字符串。不包括GET和POST参数以及域名。</p> <p>例如，http://www.example.com/myapp/ 请求中，URLconf 将查找 /myapp/ 。</p> <p>在http://www.example.com/myapp/?page=3 请求中，URLconf 仍将查找 /myapp/ 。</p> <p>URLconf 不检查请求的方法。换句话讲，所有的请求方法 —— 同一个URL的<code>POST</code>、<code>GET</code>、<code>HEAD</code>等等 —— 都将路由到相同的函数。</p> <h3 id="捕获的参数永远都是字符串"><a href="#捕获的参数永远都是字符串" class="header-anchor">#</a> 捕获的参数永远都是字符串</h3> <p>每个在URLconf中捕获的参数都作为一个普通的Python字符串传递给视图，无论正则表达式使用的是什么匹配方式。例如，下面这行URLconf 中：</p> <div class="language-python extra-class"><pre class="language-python"><code>url<span class="token punctuation">(</span><span class="token string">r'^articles/(?P&lt;year&gt;[0-9]{4})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>year_archive<span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p>传递到视图函数<code>views.year_archive()</code> 中的<code>year</code>参数永远是一个字符串类型。</p> <h3 id="视图函数中指定默认值"><a href="#视图函数中指定默认值" class="header-anchor">#</a> 视图函数中指定默认值</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># urls.py中</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url

<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^blog/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>page<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^blog/page(?P&lt;num&gt;[0-9]+)/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>page<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment"># views.py中，可以为num指定默认值</span>
<span class="token keyword">def</span> <span class="token function">page</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> num<span class="token operator">=</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>
</code></pre></div><p>在上面的例子中，两个URL模式指向相同的view - views.page - 但是第一个模式并没有从URL中捕获任何东西。</p> <p>如果第一个模式匹配上了，page()函数将使用其默认参数num=“1”,如果第二个模式匹配，page()将使用正则表达式捕获到的num值。</p> <h2 id="路由文件按项目分发方式"><a href="#路由文件按项目分发方式" class="header-anchor">#</a> 路由文件按项目分发方式</h2> <p>当我们项目比较在的时候，跳转比较多的时候，那么主项目当个url配置文件就变得庞大无比，所以主要使用项目分发方式，在每个项目目录下创建一个url文件，并导入url模块，这样子，最基础的就形成了</p> <p>在主项目的url文件配置子项目的跳转名，在由include把请求跳转给所属子项目的url文件进行第二次跳转</p> <p><strong>主项目url文件</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#At any point, your urlpatterns can “include” other URLconf modules. This</span>
<span class="token comment">#essentially “roots” a set of URLs below other ones.</span>

<span class="token comment">#For example, here’s an excerpt of the URLconf for the Django website itself.</span>
<span class="token comment">#It includes a number of other URLconfs:</span>


<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> include<span class="token punctuation">,</span> url

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
   url<span class="token punctuation">(</span><span class="token string">r'^admin/'</span><span class="token punctuation">,</span> admin<span class="token punctuation">.</span>site<span class="token punctuation">.</span>urls<span class="token punctuation">)</span><span class="token punctuation">,</span>
   url<span class="token punctuation">(</span><span class="token string">r'^blog/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'blog.urls'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># 可以包含其他的URLconfs文件</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>blog子项目的url文件</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url

<span class="token keyword">from</span> blog <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^home/(?P&lt;year&gt;[0-9]{4})/(?P&lt;month&gt;[0-9]{2})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>home<span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>访问</strong></p> <p>这样想要访问子项目的项目：127.0.0.1:8080/blog/home/2019/12</p> <p>访问时，会先拿主项目的url文件进行正则匹配，要是匹配成功，include模块就把接下来的请求转发到指定的子项目url文件中，进行第二次匹配</p> <h2 id="传递额外固定的参数给视图函数-了解"><a href="#传递额外固定的参数给视图函数-了解" class="header-anchor">#</a> 传递额外固定的参数给视图函数（了解）</h2> <p>URLconfs 具有一个钩子，让你传递一个Python 字典作为额外的参数传递给视图函数。</p> <p><code>django.conf.urls.url()</code> 可以接收一个可选的第三个参数，它是一个字典，表示想要传递给视图函数的额外关键字参数。</p> <p>例如：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^blog/(?P&lt;year&gt;[0-9]{4})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>year_archive<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'foo'</span><span class="token punctuation">:</span> <span class="token string">'bar'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p>在这个例子中，对于/blog/2005/请求，Django 将调用views.year_archive(request, year='2005', foo='bar')。
当传递额外参数的字典中的参数和URL中捕获值的命名关键字参数同名时，函数调用时将使用的是字典中的参数，而不是URL中捕获的参数。</p> <h2 id="命名url和url反向解析"><a href="#命名url和url反向解析" class="header-anchor">#</a> 命名URL和URL反向解析</h2> <p>在使用Django 项目时，一个常见的需求是获得URL的最终形式，以用于嵌入到生成的内容中（视图中和显示给用户的URL等）或者用于处理服务器端的导航（重定向等）。</p> <p>人们强烈希望不要硬编码这些URL（费力、不可扩展且容易产生错误）或者设计一种与URLconf 毫不相关的专门的URL 生成机制，因为这样容易导致一定程度上产生过期的URL。</p> <p>换句话讲，需要的是一个DRY 机制。除了其它有点，它还允许设计的URL 可以自动更新而不用遍历项目的源代码来搜索并替换过期的URL。</p> <p>获取一个URL 最开始想到的信息是处理它视图的标识（例如名字），查找正确的URL 的其它必要的信息有视图参数的类型（位置参数、关键字参数）和值。</p> <p>Django 提供一个办法是让URL 映射是URL 设计唯一的地方。你填充你的URLconf，然后可以双向使用它：</p> <ol><li>根据用户/浏览器发起的URL 请求，它调用正确的Django 视图，并从URL 中提取它的参数需要的值。</li> <li>根据Django 视图的标识和将要传递给它的参数的值，获取与之关联的URL。</li></ol> <p>第一种方式是我们在前面的章节中一直讨论的用法。第二种方式叫做反向解析URL、反向URL 匹配、反向URL 查询或者简单的URL 反查。</p> <p>在需要URL 的地方，对于不同层级，Django 提供不同的工具用于URL 反查：</p> <ol><li>在模板中：使用url模板标签。</li> <li>在Python 代码中：使用django.core.urlresolvers.reverse() 函数。</li> <li>在更高层的与处理Django 模型实例相关的代码中：使用get_absolute_url() 方法。</li></ol> <p>上面说了一大堆，你可能并没有看懂。（那是官方文档的生硬翻译）。</p> <p>咱们简单来说就是可以给我们的URL匹配规则起个名字，一个URL匹配模式起一个名字。</p> <p>这样我们以后就不需要写死URL代码了，只需要通过名字来调用当前的URL。</p> <p><strong>举个简单的例子：</strong></p> <div class="language-python extra-class"><pre class="language-python"><code>url<span class="token punctuation">(</span><span class="token string">r'^home'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>home<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'home'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># 给我的url匹配模式起名为 home</span>
url<span class="token punctuation">(</span><span class="token string">r'^index/(\d*)'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>index<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'index'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># 给我的url匹配模式起名为index</span>
</code></pre></div><p>这样在模板里面可以这样引用：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span><span class="token operator">%</span> url <span class="token string">'home'</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre></div><p>在views函数中可以这样引用：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> reverse

reverse<span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">&quot;2018&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">## 设置&quot;index&quot;链接中分组的数据，并生成完整的url链接</span>
<span class="token keyword">return</span> reverse<span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span>  <span class="token comment">## 让页面返回到/index/链接中</span>
</code></pre></div><h3 id="练习题"><a href="#练习题" class="header-anchor">#</a> 练习题</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url

<span class="token keyword">from</span> <span class="token punctuation">.</span> <span class="token keyword">import</span> views

urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token comment"># ...</span>
    url<span class="token punctuation">(</span><span class="token string">r'^articles/([0-9]{4})/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>year_archive<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'news-year-archive'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment"># ...</span>
<span class="token punctuation">]</span>
</code></pre></div><p>根据这里的设计，某一年nnnn对应的归档的URL是<code>/articles/nnnn/</code>。</p> <p>你可以在模板的代码中使用下面的方法获得它们：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;{% url 'news-year-archive' 2012 %}&quot;</span><span class="token operator">&gt;</span><span class="token number">2012</span> Archive<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">for</span> yearvar <span class="token keyword">in</span> year_list <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;{% url 'news-year-archive' yearvar %}&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> yearvar <span class="token punctuation">}</span><span class="token punctuation">}</span> Archive<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token punctuation">{</span><span class="token operator">%</span> endfor <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre></div><p>在Python 代码中，这样使用：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span> reverse
<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> redirect

<span class="token keyword">def</span> <span class="token function">redirect_to_year</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># ...</span>
    year <span class="token operator">=</span> <span class="token number">2006</span>
    <span class="token comment"># ...</span>
    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span>reverse<span class="token punctuation">(</span><span class="token string">'news-year-archive'</span><span class="token punctuation">,</span> args<span class="token operator">=</span><span class="token punctuation">(</span>year<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>如果出于某种原因决定按年归档文章发布的URL应该调整一下，那么你将只需要修改URLconf 中的内容。</p> <p>在某些场景中，一个视图是通用的，所以在URL 和视图之间存在多对一的关系。对于这些情况，当反查URL 时，只有视图的名字还不够。</p> <h3 id="注意事项-2"><a href="#注意事项-2" class="header-anchor">#</a> 注意事项</h3> <p>为了完成上面例子中的URL 反查，你将需要使用命名的URL 模式。URL 的名称使用的字符串可以包含任何你喜欢的字符。不只限制在合法的Python 名称。</p> <p>当命名你的URL 模式时，请确保使用的名称不会与其它应用中名称冲突。如果你的URL 模式叫做<code>comment</code>，而另外一个应用中也有一个同样的名称，当你在模板中使用这个名称的时候不能保证将插入哪个URL。</p> <p>在URL 名称中加上一个前缀，比如应用的名称，将减少冲突的可能。我们建议使用<code>myapp-comment</code> 而不是<code>comment</code>。</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">## 在视图中应用</span>
	<span class="token keyword">from</span> django<span class="token punctuation">.</span>urls <span class="token keyword">import</span>  reverse
	reverse<span class="token punctuation">(</span><span class="token string">'press_list'</span><span class="token punctuation">)</span>   ——》 <span class="token string">'/press_list/'</span>   <span class="token string">'/pre/'</span>		

    url分组：
		reverse<span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">,</span>args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'2008'</span><span class="token punctuation">,</span><span class="token string">'09'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    ——》<span class="token string">'/app01/home/2008/09/'</span>

	url命名分组：
		reverse<span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">,</span>args<span class="token operator">=</span><span class="token punctuation">(</span><span class="token string">'2008'</span><span class="token punctuation">,</span><span class="token string">'09'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    ——》<span class="token string">'/app01/home/2008/09/'</span>
		reverse<span class="token punctuation">(</span><span class="token string">'home'</span><span class="token punctuation">,</span>kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'year'</span><span class="token punctuation">:</span><span class="token string">'2018'</span><span class="token punctuation">,</span><span class="token string">'month'</span><span class="token punctuation">:</span><span class="token string">'10'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
		

<span class="token number">2</span><span class="token punctuation">.</span> 在模板中的应用
	<span class="token punctuation">{</span><span class="token operator">%</span> url <span class="token string">'press_list'</span> <span class="token operator">%</span><span class="token punctuation">}</span>  ——》  <span class="token string">'/press_list/'</span>  <span class="token string">'/pre/'</span>

    url分组：
    	<span class="token punctuation">{</span><span class="token operator">%</span> url <span class="token string">'home'</span> <span class="token string">'2009'</span> <span class="token string">'10'</span> <span class="token operator">%</span><span class="token punctuation">}</span>   ——》<span class="token string">'/app01/home/2008/10/'</span>

    url命名分组：
    	<span class="token punctuation">{</span><span class="token operator">%</span> url <span class="token string">'home'</span> <span class="token string">'2008'</span> <span class="token string">'10'</span> <span class="token operator">%</span><span class="token punctuation">}</span>   ——》<span class="token string">'/app01/home/2008/10/'</span> 
    	<span class="token punctuation">{</span><span class="token operator">%</span> url <span class="token string">'home'</span> month<span class="token operator">=</span><span class="token string">'10'</span>  year<span class="token operator">=</span><span class="token string">'2018'</span> <span class="token operator">%</span><span class="token punctuation">}</span>   ——》<span class="token string">'/app01/home/2018/10/'</span>
</code></pre></div><h2 id="命名空间模式"><a href="#命名空间模式" class="header-anchor">#</a> 命名空间模式</h2> <p>即使不同的APP使用相同的URL名称，URL的命名空间模式也可以让你唯一反转命名的URL。</p> <p>举个例子：</p> <p>project中的urls.py</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url<span class="token punctuation">,</span> include
 
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^so/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'so.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'so'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^wo/'</span><span class="token punctuation">,</span> include<span class="token punctuation">(</span><span class="token string">'wo.urls'</span><span class="token punctuation">,</span> namespace<span class="token operator">=</span><span class="token string">'wo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>so中的urls.py</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> app01 <span class="token keyword">import</span> views
 
app_name <span class="token operator">=</span> <span class="token string">'so'</span>
urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^(?P&lt;pk&gt;\d+)/$'</span><span class="token punctuation">,</span> views<span class="token punctuation">.</span>detail<span class="token punctuation">,</span> name<span class="token operator">=</span><span class="token string">'detail'</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><p><strong>wo中的urls.py</strong></p> <div class="language- extra-class"><pre class="language-text"><code>from django.conf.urls import url
from app02 import views
 
app_name = 'wo'
urlpatterns = [
    url(r'^(?P&lt;pk&gt;\d+)/$', views.detail, name='detail')
]
</code></pre></div><p>现在，我的两个app中 url名称重复了，我反转URL的时候就可以通过命名空间的名称得到我当前的URL。</p> <p><strong>语法：</strong></p> <p>'命名空间名称:URL名称'</p> <p>模板中使用：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token punctuation">{</span><span class="token operator">%</span> url <span class="token string">'app01:detail'</span> pk<span class="token operator">=</span><span class="token number">12</span> pp<span class="token operator">=</span><span class="token number">99</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre></div><p>views中的函数中使用</p> <div class="language-python extra-class"><pre class="language-python"><code>v <span class="token operator">=</span> reverse<span class="token punctuation">(</span><span class="token string">'app01:detail'</span><span class="token punctuation">,</span> kwargs<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'pk'</span><span class="token punctuation">:</span><span class="token number">11</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>这样即使app中URL的命名相同，我也可以反转得到正确的URL了。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Python/7. Python-Django/77. Django视图、request方法大全.html" class="prev">
        77. Django视图、request方法大全
      </a></span> <span class="next"><a href="/Python/7. Python-Django/79. Django模型(ORM) 认识、字段.html">
        79. Django模型(ORM) 认识、字段
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d65bef42.js" defer></script><script src="/assets/js/2.2249178e.js" defer></script><script src="/assets/js/151.17af677c.js" defer></script>
  </body>
</html>
