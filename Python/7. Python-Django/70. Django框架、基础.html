<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>70. Django框架、基础 | MSG</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="在追寻技术的同时享受生活">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.d65bef42.js" as="script"><link rel="preload" href="/assets/js/2.2249178e.js" as="script"><link rel="preload" href="/assets/js/143.68b01530.js" as="script"><link rel="prefetch" href="/assets/js/10.4785e2e5.js"><link rel="prefetch" href="/assets/js/100.33fceff2.js"><link rel="prefetch" href="/assets/js/101.62e1e5d4.js"><link rel="prefetch" href="/assets/js/102.8551fe71.js"><link rel="prefetch" href="/assets/js/103.47754d79.js"><link rel="prefetch" href="/assets/js/104.4adf114f.js"><link rel="prefetch" href="/assets/js/105.6206a08a.js"><link rel="prefetch" href="/assets/js/106.1c4561f3.js"><link rel="prefetch" href="/assets/js/107.e1531a5a.js"><link rel="prefetch" href="/assets/js/108.c637743a.js"><link rel="prefetch" href="/assets/js/109.3f150913.js"><link rel="prefetch" href="/assets/js/11.bd8ec7a6.js"><link rel="prefetch" href="/assets/js/110.088c1ac3.js"><link rel="prefetch" href="/assets/js/111.66d8d491.js"><link rel="prefetch" href="/assets/js/112.231663ee.js"><link rel="prefetch" href="/assets/js/113.a38bc531.js"><link rel="prefetch" href="/assets/js/114.e165daea.js"><link rel="prefetch" href="/assets/js/115.994b087a.js"><link rel="prefetch" href="/assets/js/116.ea3cfdfb.js"><link rel="prefetch" href="/assets/js/117.7be5e4f3.js"><link rel="prefetch" href="/assets/js/118.ebb58ddb.js"><link rel="prefetch" href="/assets/js/119.90018646.js"><link rel="prefetch" href="/assets/js/12.0d8f43df.js"><link rel="prefetch" href="/assets/js/120.bb5be863.js"><link rel="prefetch" href="/assets/js/121.3d1db670.js"><link rel="prefetch" href="/assets/js/122.d29ed1b2.js"><link rel="prefetch" href="/assets/js/123.38cc4704.js"><link rel="prefetch" href="/assets/js/124.cc8549d4.js"><link rel="prefetch" href="/assets/js/125.6ee3e9c8.js"><link rel="prefetch" href="/assets/js/126.48710eba.js"><link rel="prefetch" href="/assets/js/127.d7a1fd83.js"><link rel="prefetch" href="/assets/js/128.e5017f6b.js"><link rel="prefetch" href="/assets/js/129.4c33e121.js"><link rel="prefetch" href="/assets/js/13.2dbde7aa.js"><link rel="prefetch" href="/assets/js/130.cda66247.js"><link rel="prefetch" href="/assets/js/131.ad76f669.js"><link rel="prefetch" href="/assets/js/132.aca88758.js"><link rel="prefetch" href="/assets/js/133.a1cf5903.js"><link rel="prefetch" href="/assets/js/134.b1386377.js"><link rel="prefetch" href="/assets/js/135.94edcf53.js"><link rel="prefetch" href="/assets/js/136.24be4170.js"><link rel="prefetch" href="/assets/js/137.db57772e.js"><link rel="prefetch" href="/assets/js/138.dc67bcaa.js"><link rel="prefetch" href="/assets/js/139.5453d1f6.js"><link rel="prefetch" href="/assets/js/14.2187dbf4.js"><link rel="prefetch" href="/assets/js/140.938e5c07.js"><link rel="prefetch" href="/assets/js/141.99c7cf2c.js"><link rel="prefetch" href="/assets/js/142.428e3958.js"><link rel="prefetch" href="/assets/js/144.f67389cc.js"><link rel="prefetch" href="/assets/js/145.d952a130.js"><link rel="prefetch" href="/assets/js/146.b933dcad.js"><link rel="prefetch" href="/assets/js/147.2d8e4c0a.js"><link rel="prefetch" href="/assets/js/148.6d76ac94.js"><link rel="prefetch" href="/assets/js/149.6b4d6378.js"><link rel="prefetch" href="/assets/js/15.a53b356c.js"><link rel="prefetch" href="/assets/js/150.5bf39cb4.js"><link rel="prefetch" href="/assets/js/151.17af677c.js"><link rel="prefetch" href="/assets/js/152.7f1c2792.js"><link rel="prefetch" href="/assets/js/153.98dd0727.js"><link rel="prefetch" href="/assets/js/154.eb44bf23.js"><link rel="prefetch" href="/assets/js/155.5a9840ea.js"><link rel="prefetch" href="/assets/js/156.7ba01fd0.js"><link rel="prefetch" href="/assets/js/157.2296a048.js"><link rel="prefetch" href="/assets/js/158.6bb1f699.js"><link rel="prefetch" href="/assets/js/159.073bb8df.js"><link rel="prefetch" href="/assets/js/16.cef7bf44.js"><link rel="prefetch" href="/assets/js/160.25a837f9.js"><link rel="prefetch" href="/assets/js/161.93d886a1.js"><link rel="prefetch" href="/assets/js/162.5d2714b2.js"><link rel="prefetch" href="/assets/js/17.96f36904.js"><link rel="prefetch" href="/assets/js/18.fd04b310.js"><link rel="prefetch" href="/assets/js/19.3e1377d1.js"><link rel="prefetch" href="/assets/js/20.ac195ac8.js"><link rel="prefetch" href="/assets/js/21.c2d7729c.js"><link rel="prefetch" href="/assets/js/22.dd8c621b.js"><link rel="prefetch" href="/assets/js/23.ad7d0350.js"><link rel="prefetch" href="/assets/js/24.8559c4c3.js"><link rel="prefetch" href="/assets/js/25.783a8116.js"><link rel="prefetch" href="/assets/js/26.25e0e459.js"><link rel="prefetch" href="/assets/js/27.c0616e2a.js"><link rel="prefetch" href="/assets/js/28.30656c2e.js"><link rel="prefetch" href="/assets/js/29.2be5114c.js"><link rel="prefetch" href="/assets/js/3.be8c8f3b.js"><link rel="prefetch" href="/assets/js/30.230a74a7.js"><link rel="prefetch" href="/assets/js/31.760f46ad.js"><link rel="prefetch" href="/assets/js/32.c9533fef.js"><link rel="prefetch" href="/assets/js/33.dcacfb38.js"><link rel="prefetch" href="/assets/js/34.4370a466.js"><link rel="prefetch" href="/assets/js/35.bf299eea.js"><link rel="prefetch" href="/assets/js/36.336e435a.js"><link rel="prefetch" href="/assets/js/37.1d1d2eea.js"><link rel="prefetch" href="/assets/js/38.0d58b7d0.js"><link rel="prefetch" href="/assets/js/39.d43564ba.js"><link rel="prefetch" href="/assets/js/4.4a6cb970.js"><link rel="prefetch" href="/assets/js/40.bc4e4bde.js"><link rel="prefetch" href="/assets/js/41.b71231a5.js"><link rel="prefetch" href="/assets/js/42.9d46f400.js"><link rel="prefetch" href="/assets/js/43.50c5be69.js"><link rel="prefetch" href="/assets/js/44.60406e7f.js"><link rel="prefetch" href="/assets/js/45.ec3569ae.js"><link rel="prefetch" href="/assets/js/46.1bd3ce7b.js"><link rel="prefetch" href="/assets/js/47.1e1b5326.js"><link rel="prefetch" href="/assets/js/48.64c631ea.js"><link rel="prefetch" href="/assets/js/49.b4abacd8.js"><link rel="prefetch" href="/assets/js/5.e6d0b165.js"><link rel="prefetch" href="/assets/js/50.c3e320c0.js"><link rel="prefetch" href="/assets/js/51.5ec7fb8c.js"><link rel="prefetch" href="/assets/js/52.2d234f86.js"><link rel="prefetch" href="/assets/js/53.f3b69623.js"><link rel="prefetch" href="/assets/js/54.c85ff450.js"><link rel="prefetch" href="/assets/js/55.b07597b5.js"><link rel="prefetch" href="/assets/js/56.444129cf.js"><link rel="prefetch" href="/assets/js/57.df1329ba.js"><link rel="prefetch" href="/assets/js/58.5afb51cf.js"><link rel="prefetch" href="/assets/js/59.d98936d9.js"><link rel="prefetch" href="/assets/js/6.809376cd.js"><link rel="prefetch" href="/assets/js/60.02813ecf.js"><link rel="prefetch" href="/assets/js/61.37a4812d.js"><link rel="prefetch" href="/assets/js/62.5da94048.js"><link rel="prefetch" href="/assets/js/63.8e2c2bca.js"><link rel="prefetch" href="/assets/js/64.d290398f.js"><link rel="prefetch" href="/assets/js/65.44e28313.js"><link rel="prefetch" href="/assets/js/66.9acf0206.js"><link rel="prefetch" href="/assets/js/67.85688aa2.js"><link rel="prefetch" href="/assets/js/68.45bda7fc.js"><link rel="prefetch" href="/assets/js/69.9074feb0.js"><link rel="prefetch" href="/assets/js/7.5d7bce6e.js"><link rel="prefetch" href="/assets/js/70.b4cd2ddc.js"><link rel="prefetch" href="/assets/js/71.53219b13.js"><link rel="prefetch" href="/assets/js/72.af2a7290.js"><link rel="prefetch" href="/assets/js/73.c28fc506.js"><link rel="prefetch" href="/assets/js/74.64c81a90.js"><link rel="prefetch" href="/assets/js/75.05191ece.js"><link rel="prefetch" href="/assets/js/76.f516d464.js"><link rel="prefetch" href="/assets/js/77.c345180b.js"><link rel="prefetch" href="/assets/js/78.4a09d0ba.js"><link rel="prefetch" href="/assets/js/79.65f41bcf.js"><link rel="prefetch" href="/assets/js/8.f6cfdc07.js"><link rel="prefetch" href="/assets/js/80.b77151f3.js"><link rel="prefetch" href="/assets/js/81.824fa371.js"><link rel="prefetch" href="/assets/js/82.3f91c09b.js"><link rel="prefetch" href="/assets/js/83.9539f074.js"><link rel="prefetch" href="/assets/js/84.dd89f1de.js"><link rel="prefetch" href="/assets/js/85.15210b99.js"><link rel="prefetch" href="/assets/js/86.e14553e1.js"><link rel="prefetch" href="/assets/js/87.6dc95177.js"><link rel="prefetch" href="/assets/js/88.09c5e890.js"><link rel="prefetch" href="/assets/js/89.0d61f4d0.js"><link rel="prefetch" href="/assets/js/9.759f1986.js"><link rel="prefetch" href="/assets/js/90.a9b14d80.js"><link rel="prefetch" href="/assets/js/91.1a4aabe2.js"><link rel="prefetch" href="/assets/js/92.12070bdb.js"><link rel="prefetch" href="/assets/js/93.b5dc76d0.js"><link rel="prefetch" href="/assets/js/94.690498a6.js"><link rel="prefetch" href="/assets/js/95.b17961e6.js"><link rel="prefetch" href="/assets/js/96.a2f06f3e.js"><link rel="prefetch" href="/assets/js/97.64ef6721.js"><link rel="prefetch" href="/assets/js/98.443eba26.js"><link rel="prefetch" href="/assets/js/99.b6ba7c3a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">MSG</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python文档" class="dropdown-title"><span class="title">Python文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python文档" class="mobile-dropdown-title"><span class="title">Python文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Python/1.Python-Basics/" class="nav-link">
  Python-基础
</a></li><li class="dropdown-item"><!----> <a href="/Python/2. Python-object/" class="nav-link">
  Python-面向对象
</a></li><li class="dropdown-item"><!----> <a href="/Python/3. Python-module/" class="nav-link">
  Python-模块与包
</a></li><li class="dropdown-item"><!----> <a href="/Python/4. Python-network/" class="nav-link">
  Python-网络
</a></li><li class="dropdown-item"><!----> <a href="/Python/5. Python-frontend/" class="nav-link">
  Python-前端
</a></li><li class="dropdown-item"><!----> <a href="/Python/6. Python-MySQL/" class="nav-link">
  Python-数据库
</a></li><li class="dropdown-item"><!----> <a href="/Python/7. Python-Django/" class="nav-link">
  Python-Django
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="容器文档" class="dropdown-title"><span class="title">容器文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="容器文档" class="mobile-dropdown-title"><span class="title">容器文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Container/docker/" class="nav-link">
  docker文檔
</a></li><li class="dropdown-item"><!----> <a href="/Container/Kubernetes/" class="nav-link">
  Kubernetes文檔
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GO文档" class="dropdown-title"><span class="title">GO文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="GO文档" class="mobile-dropdown-title"><span class="title">GO文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/GO/basics/" class="nav-link">
  GO快速入门
</a></li><li class="dropdown-item"><!----> <a href="/GO/module/" class="nav-link">
  GO标准库/GO模块
</a></li></ul></div></div><div class="nav-item"><a href="https://www.linux91.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Python文档" class="dropdown-title"><span class="title">Python文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="Python文档" class="mobile-dropdown-title"><span class="title">Python文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Python/1.Python-Basics/" class="nav-link">
  Python-基础
</a></li><li class="dropdown-item"><!----> <a href="/Python/2. Python-object/" class="nav-link">
  Python-面向对象
</a></li><li class="dropdown-item"><!----> <a href="/Python/3. Python-module/" class="nav-link">
  Python-模块与包
</a></li><li class="dropdown-item"><!----> <a href="/Python/4. Python-network/" class="nav-link">
  Python-网络
</a></li><li class="dropdown-item"><!----> <a href="/Python/5. Python-frontend/" class="nav-link">
  Python-前端
</a></li><li class="dropdown-item"><!----> <a href="/Python/6. Python-MySQL/" class="nav-link">
  Python-数据库
</a></li><li class="dropdown-item"><!----> <a href="/Python/7. Python-Django/" class="nav-link">
  Python-Django
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="容器文档" class="dropdown-title"><span class="title">容器文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="容器文档" class="mobile-dropdown-title"><span class="title">容器文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Container/docker/" class="nav-link">
  docker文檔
</a></li><li class="dropdown-item"><!----> <a href="/Container/Kubernetes/" class="nav-link">
  Kubernetes文檔
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="GO文档" class="dropdown-title"><span class="title">GO文档</span> <span class="arrow down"></span></button> <button type="button" aria-label="GO文档" class="mobile-dropdown-title"><span class="title">GO文档</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/GO/basics/" class="nav-link">
  GO快速入门
</a></li><li class="dropdown-item"><!----> <a href="/GO/module/" class="nav-link">
  GO标准库/GO模块
</a></li></ul></div></div><div class="nav-item"><a href="https://www.linux91.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  博客
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python-Django</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Python/7.%20Python-Django/" aria-current="page" class="sidebar-link">介绍</a></li><li><a href="/Python/7. Python-Django/68. request相关的属性.html" class="sidebar-link">68. request相关的属性</a></li><li><a href="/Python/7. Python-Django/69. WEB框架的本质.html" class="sidebar-link">69. WEB框架的本质</a></li><li><a href="/Python/7. Python-Django/70. Django框架、基础.html" class="active sidebar-link">70. Django框架、基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#mvc框架-web服务大部分使用的框架" class="sidebar-link">MVC框架 - web服务大部分使用的框架</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#django的mtv架构模式" class="sidebar-link">Django的MTV架构模式</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#目录介绍" class="sidebar-link">目录介绍</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#模板文件配置" class="sidebar-link">模板文件配置</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#静态文件配置" class="sidebar-link">静态文件配置</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#禁止表单提交检测" class="sidebar-link">禁止表单提交检测</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#httpresponse" class="sidebar-link">HttpResponse</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#render" class="sidebar-link">render</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#redirect" class="sidebar-link">redirect</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#登录项目-不带数据库版本" class="sidebar-link">登录项目 - 不带数据库版本</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#_1-修改django的默认数据库模块" class="sidebar-link">1. 修改django的默认数据库模块</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#_2-配置数据库配置区" class="sidebar-link">2.  配置数据库配置区</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#_3-创建表" class="sidebar-link">3. 创建表</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#_4-生成记录跟提交修改" class="sidebar-link">4. 生成记录跟提交修改</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#_5-简单使用" class="sidebar-link">5. 简单使用</a></li><li class="sidebar-sub-header"><a href="/Python/7. Python-Django/70. Django框架、基础.html#登录项目-使用orm对数据库进行交互" class="sidebar-link">登录项目 - 使用ORM对数据库进行交互</a></li></ul></li><li><a href="/Python/7. Python-Django/71. Django图书馆之出版社的增删改查 - 单表.html" class="sidebar-link">71. Django图书馆之出版社的增删改查 - 单表</a></li><li><a href="/Python/7. Python-Django/72. Django图书馆之书籍的增删改查 - 多表(外键).html" class="sidebar-link">72. Django图书馆之书籍的增删改查 - 多表(外键)</a></li><li><a href="/Python/7. Python-Django/73. Django图书馆之作者的增删改查 - 多对多关系表.html" class="sidebar-link">73. Django图书馆之作者的增删改查 - 多对多关系表</a></li><li><a href="/Python/7. Python-Django/74. Django简单上传文件.html" class="sidebar-link">74. Django简单上传文件</a></li><li><a href="/Python/7. Python-Django/75. Django模板语言之变量.html" class="sidebar-link">75. Django模板语言之变量</a></li><li><a href="/Python/7. Python-Django/76. Django模板语言之逻辑.html" class="sidebar-link">76. Django模板语言之逻辑</a></li><li><a href="/Python/7. Python-Django/77. Django视图、request方法大全.html" class="sidebar-link">77. Django视图、request方法大全</a></li><li><a href="/Python/7. Python-Django/78. Django路由系统(url).html" class="sidebar-link">78. Django路由系统(url)</a></li><li><a href="/Python/7. Python-Django/79. Django模型(ORM) 认识、字段.html" class="sidebar-link">79. Django模型(ORM) 认识、字段</a></li><li><a href="/Python/7. Python-Django/80. Django模型(ORM) 操作、进阶.html" class="sidebar-link">80. Django模型(ORM) 操作、进阶</a></li><li><a href="/Python/7. Python-Django/81. Django - Cookie、Session、自定义分页.html" class="sidebar-link">81. Django - Cookie、Session、自定义分页</a></li><li><a href="/Python/7. Python-Django/82. Django - 中间件.html" class="sidebar-link">82. Django - 中间件</a></li><li><a href="/Python/7. Python-Django/83. Django - ajax、csrf中间件补充.html" class="sidebar-link">83. Django - ajax、csrf中间件补充</a></li><li><a href="/Python/7. Python-Django/84. Django - Form、ModelForm.html" class="sidebar-link">84. Django - Form、ModelForm</a></li><li><a href="/Python/7. Python-Django/85. Django - auth认证组件.html" class="sidebar-link">85. Django - auth认证组件</a></li><li><a href="/Python/7. Python-Django/86. 权限控制.html" class="sidebar-link">86. 权限控制</a></li><li><a href="/Python/7. Python-Django/87. django小技巧.html" class="sidebar-link">87. django小技巧</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_70-django框架、基础"><a href="#_70-django框架、基础" class="header-anchor">#</a> 70. Django框架、基础</h1> <h1 id="django框架"><a href="#django框架" class="header-anchor">#</a> Django框架</h1> <h2 id="mvc框架-web服务大部分使用的框架"><a href="#mvc框架-web服务大部分使用的框架" class="header-anchor">#</a> MVC框架 - web服务大部分使用的框架</h2> <p>MVC，全名是Model View Controller，是软件工程中的一种软件架构模式，把软件系统分为三个基本部分：模型(Model)、视图(View)和控制器(Controller)，具有耦合性低、重用性高、生命周期成本低等优点。</p> <p><img src="https://s2.ax1x.com/2019/12/10/QBkmtO.png" alt="QBkmtO.png"></p> <p>**了解更多，可以考虑这文章：**http://www.ruanyifeng.com/blog/2007/11/mvc.html</p> <h2 id="django的mtv架构模式"><a href="#django的mtv架构模式" class="header-anchor">#</a> Django的MTV架构模式</h2> <p>Django框架的设计模式借鉴了MVC框架的思想，也是分成三部分，来降低各个部分之间的耦合性。</p> <p>Django框架的不同之处在于它拆分的三部分为：Model（模型）、Template（模板）和View（视图），也就是MTV框架。</p> <ol><li>Model(模型)：负责业务对象与数据库的对象(ORM)</li> <li>Template(模版)：负责如何把页面展示给用户</li> <li>View(视图)：负责业务逻辑，并在适当的时候调用Model和Template</li></ol> <p>此外，Django还有一个urls分发器，它的作用是将一个个URL的页面请求分发给不同的view处理，view再调用相应的Model和Template</p> <p><img src="https://s2.ax1x.com/2019/12/10/QBEVJO.png" alt="QBEVJO.png"></p> <h1 id="安装django"><a href="#安装django" class="header-anchor">#</a> 安装Django</h1> <p><strong>命令行安装</strong></p> <div class="language-python extra-class"><pre class="language-python"><code>pip install Django<span class="token operator">==</span><span class="token number">1.11</span><span class="token number">.11</span>  <span class="token comment">##安装</span>
pip uninstall django  <span class="token comment">##卸载</span>
</code></pre></div><p><strong>pycharm安装更简单，自行百度</strong></p> <h1 id="创建第一个django项目"><a href="#创建第一个django项目" class="header-anchor">#</a> 创建第一个Django项目</h1> <p><strong>命令行创建</strong></p> <div class="language-python extra-class"><pre class="language-python"><code>django<span class="token operator">-</span>admin startproject 项目名
</code></pre></div><p><strong>PyCharm创建</strong></p> <p>File -&gt; new Project -&gt; 左侧选第二项，右侧第一项是路径，第二项是选python版本</p> <p>在新的PyCharm窗口打开新建的Django项目</p> <h2 id="目录介绍"><a href="#目录介绍" class="header-anchor">#</a> 目录介绍</h2> <div class="language-python extra-class"><pre class="language-python"><code>项目名<span class="token operator">/</span>
├── manage<span class="token punctuation">.</span>py  <span class="token comment"># 管理文件</span>
├── templates  <span class="token comment"># html文件存放目录</span>
└── 项目名  <span class="token comment"># 项目目录</span>
    ├── __init__<span class="token punctuation">.</span>py
    ├── settings<span class="token punctuation">.</span>py  <span class="token comment"># 配置</span>
    ├── urls<span class="token punctuation">.</span>py  <span class="token comment"># 路由 --&gt; URL和函数的对应关系</span>
    └── wsgi<span class="token punctuation">.</span>py  <span class="token comment"># runserver命令就使用wsgiref模块做简单的web server</span>
</code></pre></div><h2 id="模板文件配置"><a href="#模板文件配置" class="header-anchor">#</a> 模板文件配置</h2> <div class="language-python extra-class"><pre class="language-python"><code>TEMPLATES <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">'BACKEND'</span><span class="token punctuation">:</span> <span class="token string">'django.template.backends.django.DjangoTemplates'</span><span class="token punctuation">,</span>
        <span class="token string">'DIRS'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">&quot;template&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment"># template文件夹位置</span>
        <span class="token string">'APP_DIRS'</span><span class="token punctuation">:</span> <span class="token boolean">True</span><span class="token punctuation">,</span>
        <span class="token string">'OPTIONS'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token string">'context_processors'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>
                <span class="token string">'django.template.context_processors.debug'</span><span class="token punctuation">,</span>
                <span class="token string">'django.template.context_processors.request'</span><span class="token punctuation">,</span>
                <span class="token string">'django.contrib.auth.context_processors.auth'</span><span class="token punctuation">,</span>
                <span class="token string">'django.contrib.messages.context_processors.messages'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="静态文件配置"><a href="#静态文件配置" class="header-anchor">#</a> 静态文件配置</h2> <div class="language-python extra-class"><pre class="language-python"><code>STATIC_URL <span class="token operator">=</span> <span class="token string">'/static/'</span>  <span class="token comment"># HTML中使用的静态文件夹前缀</span>
STATICFILES_DIRS <span class="token operator">=</span> <span class="token punctuation">[</span>
    os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>BASE_DIR<span class="token punctuation">,</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment"># 静态文件存放位置</span>
<span class="token punctuation">]</span>
</code></pre></div><p><img src="https://s2.ax1x.com/2019/11/29/Qk7zkt.png" alt="Qk7zkt.png"></p> <h2 id="禁止表单提交检测"><a href="#禁止表单提交检测" class="header-anchor">#</a> <strong>禁止表单提交检测</strong></h2> <p>在settings.py的文件中，关闭46行的配置</p> <div class="language-python extra-class"><pre class="language-python"><code>MIDDLEWARE <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'django.middleware.security.SecurityMiddleware'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.sessions.middleware.SessionMiddleware'</span><span class="token punctuation">,</span>
    <span class="token string">'django.middleware.common.CommonMiddleware'</span><span class="token punctuation">,</span>
    <span class="token comment"># 'django.middleware.csrf.CsrfViewMiddleware',</span>
    <span class="token string">'django.contrib.auth.middleware.AuthenticationMiddleware'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.messages.middleware.MessageMiddleware'</span><span class="token punctuation">,</span>
    <span class="token string">'django.middleware.clickjacking.XFrameOptionsMiddleware'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>
</code></pre></div><h1 id="django基础必备三件套"><a href="#django基础必备三件套" class="header-anchor">#</a> Django基础必备三件套</h1> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> HttpResponse<span class="token punctuation">,</span> render<span class="token punctuation">,</span> redirect
</code></pre></div><h2 id="httpresponse"><a href="#httpresponse" class="header-anchor">#</a> HttpResponse</h2> <p>内部传入一个字符串参数，返回给浏览器。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> HttpResponse
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 业务逻辑代码</span>
    <span class="token keyword">return</span> HttpResponse<span class="token punctuation">(</span><span class="token string">&quot;OK&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="render"><a href="#render" class="header-anchor">#</a> render</h2> <p>除request参数外还接受一个待渲染的模板文件和一个保存具体数据的字典参数。</p> <p>将数据填充进模板文件，最后把结果返回给浏览器。（类似于我们上面用到的jinja2）</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render
<span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 业务逻辑代码</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">&quot;index.html&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;alex&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hobby&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;烫头&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;泡吧&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="redirect"><a href="#redirect" class="header-anchor">#</a> redirect</h2> <p>接受一个URL参数，表示跳转到指定的URL。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 业务逻辑代码</span>
    <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">&quot;/home/&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="django的替换符-模板语言"><a href="#django的替换符-模板语言" class="header-anchor">#</a> Django的替换符(模板语言)</h1> <p>比如，在前端的html中，增加，在调用的时候进行赋值</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 前端部分内容</span>
<span class="token operator">&lt;</span>p <span class="token builtin">id</span><span class="token operator">=</span><span class="token string">&quot;p1&quot;</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> warning <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>


<span class="token comment"># django内容</span>
<span class="token keyword">def</span> <span class="token function">Login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    warning <span class="token operator">=</span> <span class="token string">&quot;错误&quot;</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">&quot;login.html&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;warning&quot;</span><span class="token punctuation">:</span>warning<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="form表单提交数据的三个要素"><a href="#form表单提交数据的三个要素" class="header-anchor">#</a> <strong>form表单提交数据的三个要素</strong></h1> <ol><li>form标签必须要有action和method属性</li> <li>所有获取用户输入的标签必须放在form表单中，必须要有name属性</li> <li>必须要有submit按钮</li></ol> <h1 id="request相关的属性"><a href="#request相关的属性" class="header-anchor">#</a> <strong>request相关的属性</strong></h1> <ol><li>request.method   --&gt; 返回的是请求的方法（全大写）：GET/POST ...</li> <li>request.GET      --&gt; 取得是URL里面的参数，类似于字典的数据结构</li> <li>request.POST     --&gt; post提交的数据，类似于字典的数据结构
<ol><li>request.POST.get(&quot;提交表单时的name名&quot;)， --&gt; 获取提交表单时发送过来的name名数据</li></ol></li></ol> <h1 id="django练习项目"><a href="#django练习项目" class="header-anchor">#</a> Django练习项目</h1> <h2 id="登录项目-不带数据库版本"><a href="#登录项目-不带数据库版本" class="header-anchor">#</a> 登录项目 - 不带数据库版本</h2> <p>拿到前面前端写好的，登录界面跟博客界面</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">## urls.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>conf<span class="token punctuation">.</span>urls <span class="token keyword">import</span> url
<span class="token keyword">from</span> django<span class="token punctuation">.</span>contrib <span class="token keyword">import</span> admin
<span class="token keyword">import</span> os<span class="token punctuation">,</span>sys
server_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>abspath<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>server_path<span class="token punctuation">)</span>
<span class="token keyword">from</span> cort <span class="token keyword">import</span> index<span class="token punctuation">,</span>login


urlpatterns <span class="token operator">=</span> <span class="token punctuation">[</span>
    url<span class="token punctuation">(</span><span class="token string">r'^index/$'</span><span class="token punctuation">,</span> index<span class="token punctuation">.</span>Index<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^$'</span><span class="token punctuation">,</span> login<span class="token punctuation">.</span>Login<span class="token punctuation">)</span><span class="token punctuation">,</span>
    url<span class="token punctuation">(</span><span class="token string">r'^login/$'</span><span class="token punctuation">,</span> login<span class="token punctuation">.</span>Login<span class="token punctuation">)</span>
<span class="token punctuation">]</span>


<span class="token comment">## login.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span>redirect

<span class="token keyword">def</span> <span class="token function">Login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    warning <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">:</span>
        user <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
        pwd <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;pwd&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> user <span class="token operator">==</span> <span class="token string">&quot;admin&quot;</span> <span class="token keyword">and</span> pwd <span class="token operator">==</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">&quot;/index/&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            warning <span class="token operator">=</span> <span class="token string">&quot;用户名或密码错误&quot;</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">&quot;login.html&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;warning&quot;</span><span class="token punctuation">:</span>warning<span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token comment">## index.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span>redirect<span class="token punctuation">,</span>HttpResponse
<span class="token keyword">def</span> <span class="token function">Index</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token string">'index.html'</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="django创建项目包-app"><a href="#django创建项目包-app" class="header-anchor">#</a> Django创建项目包(app)</h1> <p>Django项目app  --&gt; 项目中又分了一级Python包,不同的功能放到不同的包里面</p> <p><strong>创建app</strong></p> <div class="language-python extra-class"><pre class="language-python"><code>python3 manage<span class="token punctuation">.</span>py startapp 项目包名
</code></pre></div><p><strong>告诉Django创建了一个app</strong></p> <p>在settings.py找那个的INSTALLED_APPS中添加新创建的app</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">#比如创建了app01的项目包</span>
INSTALLED_APPS <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token string">'django.contrib.admin'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.auth'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.contenttypes'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.sessions'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.messages'</span><span class="token punctuation">,</span>
    <span class="token string">'django.contrib.staticfiles'</span><span class="token punctuation">,</span>
    <span class="token string">'app01.apps.App01Config'</span><span class="token punctuation">,</span>  <span class="token comment"># 告诉Django我自己新建了一个名叫app01的应用</span>
    <span class="token comment"># 'app01'</span>
<span class="token punctuation">]</span>

<span class="token comment">## 有二种告诉django的方向</span>

<span class="token comment">## 第一种，推荐使用</span>
<span class="token string">'app01.apps.App01Config'</span>
<span class="token comment"># app01 项目名</span>
<span class="token comment"># apps 在创建项目中，有个apps的文件，里面大概是这些内容</span>
	<span class="token keyword">from</span> django<span class="token punctuation">.</span>apps <span class="token keyword">import</span> AppConfig
    <span class="token keyword">class</span> <span class="token class-name">App01Config</span><span class="token punctuation">(</span>AppConfig<span class="token punctuation">)</span><span class="token punctuation">:</span>
        name <span class="token operator">=</span> <span class="token string">'app01'</span>
<span class="token comment"># App01Config 就是apps文件中类的名字</span>


<span class="token comment">## 第二种方法</span>
<span class="token string">'app01'</span>
<span class="token comment">##直接写项目名</span>
</code></pre></div><h1 id="orm管理数据库-基础五步曲"><a href="#orm管理数据库-基础五步曲" class="header-anchor">#</a> ORM管理数据库 - 基础五步曲</h1> <p>用处
1. 操作数据表
2. 操作数据行</p> <p>优点：</p> <div class="language- extra-class"><pre><code>		1. 开发效率高
        			2. 开发不用直接写SQL语句
</code></pre></div><p>缺点：</p> <div class="language- extra-class"><pre><code>1. 执行效率低
</code></pre></div><h2 id="_1-修改django的默认数据库模块"><a href="#_1-修改django的默认数据库模块" class="header-anchor">#</a> 1. 修改django的默认数据库模块</h2> <p>django中默认的数据库模块是mysqldb，但是这模块比较少人使用，在加上，mysqldb不支持Python3，所以我们要修改django中的默认数据库模块</p> <p>在项目中，找到主项目名的目录中的__init__文件</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pymysql
pymysql<span class="token punctuation">.</span>install_as_MySQLdb<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">## 告诉django，要使用pymysql来作为数据库模块</span>
</code></pre></div><h2 id="_2-配置数据库配置区"><a href="#_2-配置数据库配置区" class="header-anchor">#</a> 2.  配置数据库配置区</h2> <p>找到settings.py文件，在里面有个数据库配置区，默认是使用自带的db.sqlite3数据库文件</p> <div class="language-python extra-class"><pre class="language-python"><code>DATABASES <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">'default'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">'ENGINE'</span><span class="token punctuation">:</span> <span class="token string">'django.db.backends.mysql'</span><span class="token punctuation">,</span>  <span class="token comment"># 连接数据库的类型</span>
        <span class="token string">'NAME'</span><span class="token punctuation">:</span> <span class="token string">'project'</span><span class="token punctuation">,</span>  <span class="token comment"># 数据库名</span>
        <span class="token string">'HOST'</span><span class="token punctuation">:</span> <span class="token string">'192.168.0.73'</span><span class="token punctuation">,</span>  <span class="token comment"># 数据库主机地址</span>
        <span class="token string">'PORT'</span><span class="token punctuation">:</span> <span class="token number">3306</span><span class="token punctuation">,</span>  <span class="token comment"># 数据库的端口</span>
        <span class="token string">'USER'</span><span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span> <span class="token comment"># 用户名</span>
        <span class="token string">'PASSWORD'</span><span class="token punctuation">:</span> <span class="token string">'123456'</span> <span class="token comment"># 密码，如果为空，也要写上 空字符串</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-创建表"><a href="#_3-创建表" class="header-anchor">#</a> 3. 创建表</h2> <p>在django中使用orm，需要在子项目中的models.py的文件中创建类</p> <p>在ORM中</p> <ol><li>类 == 数据表</li> <li>属性 == 字段</li> <li>对象 == 数据行</li></ol> <p>在django中，用于orm的类，必须继承models.Model</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token comment"># Create your models here.</span>

<span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>AutoField<span class="token punctuation">(</span>primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># -&gt; 创建一个自增的ID列作为主键</span>
    user <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">)</span>  <span class="token comment"># -&gt; varchar(32)</span>
    pwd <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>  <span class="token comment"># -&gt; varchar(32)</span>
</code></pre></div><h2 id="_4-生成记录跟提交修改"><a href="#_4-生成记录跟提交修改" class="header-anchor">#</a> 4. 生成记录跟提交修改</h2> <p>写在models.py文件中，如果有关数据库操作的，比如，添加表、增加行、删除行、修改行等，都需要执行以下的步骤，让需要变更的操作，先记录在子项目的migrations目录中，在进行提交更改</p> <p>C:\Users\admin\AppData\Local\Programs\Python\Python36\python.exe</p> <p>生成记录命令：python3 manage.py makemigrations</p> <p>提交变更记录修改命令：python3 manage.py migrate</p> <p><strong>错误</strong></p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">## No changes detected</span>
<span class="token comment">## 如果遇到以上的错误，本人的解决方案：检查你的子项目有没有添加在主项目包的配置文件中</span>
</code></pre></div><h2 id="_5-简单使用"><a href="#_5-简单使用" class="header-anchor">#</a> 5. 简单使用</h2> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> app_admin<span class="token punctuation">.</span>models <span class="token keyword">import</span> User
ret <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>user<span class="token operator">=</span>user<span class="token punctuation">,</span> pwd<span class="token operator">=</span>pwd<span class="token punctuation">)</span>  <span class="token comment">## 查询</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>

执行结果：
<span class="token operator">&lt;</span>QuerySet <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> <span class="token comment">## 查询没有</span>
<span class="token operator">&lt;</span>QuerySet <span class="token punctuation">[</span><span class="token operator">&lt;</span>User<span class="token punctuation">:</span> User <span class="token builtin">object</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>  <span class="token comment">## 查询有值</span>

<span class="token comment">## 查询返回的是一个列表，要是查询有值，那么就会返回一个带对象的列表，要是查询没有，那么就会返回空列表</span>
</code></pre></div><h1 id="django练习项目-2"><a href="#django练习项目-2" class="header-anchor">#</a> Django练习项目</h1> <h2 id="登录项目-使用orm对数据库进行交互"><a href="#登录项目-使用orm对数据库进行交互" class="header-anchor">#</a> 登录项目 - 使用ORM对数据库进行交互</h2> <p>基于上面的实验</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment">## models.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> models

<span class="token keyword">class</span> <span class="token class-name">User</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token builtin">id</span> <span class="token operator">=</span> models<span class="token punctuation">.</span>AutoField<span class="token punctuation">(</span>primary_key<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>  <span class="token comment"># -&gt; 创建一个自增的ID列作为主键</span>
    user <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">24</span><span class="token punctuation">)</span>  <span class="token comment"># -&gt; varchar(32)</span>
    pwd <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">)</span>  <span class="token comment"># -&gt; varchar(32)</span>
    
    
<span class="token comment">## login.py</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>shortcuts <span class="token keyword">import</span> render<span class="token punctuation">,</span>redirect
<span class="token keyword">from</span> app_admin<span class="token punctuation">.</span>models <span class="token keyword">import</span> User

<span class="token keyword">def</span> <span class="token function">Login</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">:</span>
    warning <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token keyword">if</span> request<span class="token punctuation">.</span>method <span class="token operator">==</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">:</span>
        user <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;user&quot;</span><span class="token punctuation">)</span>
        pwd <span class="token operator">=</span> request<span class="token punctuation">.</span>POST<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;pwd&quot;</span><span class="token punctuation">)</span>
        ret <span class="token operator">=</span> User<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>user<span class="token operator">=</span>user<span class="token punctuation">,</span> pwd<span class="token operator">=</span>pwd<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span>
        <span class="token keyword">if</span> ret<span class="token punctuation">:</span>
            <span class="token keyword">return</span> redirect<span class="token punctuation">(</span><span class="token string">&quot;/index/&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            warning <span class="token operator">=</span> <span class="token string">&quot;用户名或密码错误&quot;</span>
    <span class="token keyword">return</span> render<span class="token punctuation">(</span>request<span class="token punctuation">,</span><span class="token string">&quot;login.html&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token string">&quot;warning&quot;</span><span class="token punctuation">:</span>warning<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Python/7. Python-Django/69. WEB框架的本质.html" class="prev">
        69. WEB框架的本质
      </a></span> <span class="next"><a href="/Python/7. Python-Django/71. Django图书馆之出版社的增删改查 - 单表.html">
        71. Django图书馆之出版社的增删改查 - 单表
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d65bef42.js" defer></script><script src="/assets/js/2.2249178e.js" defer></script><script src="/assets/js/143.68b01530.js" defer></script>
  </body>
</html>
