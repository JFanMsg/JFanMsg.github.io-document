(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{390:function(s,t,a){"use strict";a.r(t);var r=a(45),n=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_7-docker之dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-docker之dockerfile"}},[s._v("#")]),s._v(" 7. docker之Dockerfile")]),s._v(" "),a("h1",{attrs:{id:"dockerfile格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile格式"}},[s._v("#")]),s._v(" "),a("strong",[s._v("Dockerfile格式")])]),s._v(" "),a("p",[s._v("Dockerfile分为四个部分，基础镜像信息、维护者信息、镜像操作指令和容器启动时执行指令。")]),s._v(" "),a("p",[s._v("字符’#’ 为 Dockerfile 中的注释")]),s._v(" "),a("h1",{attrs:{id:"dockerfile指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile指令"}},[s._v("#")]),s._v(" "),a("strong",[s._v("Dockerfile指令")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/linux91/document-img/raw/master/img/JCyhdI.png",alt:"JCyhdI.png"}})]),s._v(" "),a("p",[a("strong",[s._v("详细请看下面")])]),s._v(" "),a("ol",[a("li",[s._v("**FROM：**构建新镜像是基于哪个镜像")]),s._v(" "),a("li",[s._v("**MAINTAINER：**镜像维护者姓名或邮箱地址")]),s._v(" "),a("li",[s._v("**RUN：**构建镜像时运行的shell命令")]),s._v(" "),a("li",[s._v("**ADD：**将本地文件添加到容器中，tar类型文件会自动解压(网络压缩资源不会被解压)，可以访问网络资源，类似wget")]),s._v(" "),a("li",[s._v("**COPY：**功能类似ADD，但是是不会自动解压文件，也不能访问网络资源")]),s._v(" "),a("li",[s._v("**CMD：**构建容器后调用，也就是在容器启动时才进行调用。")]),s._v(" "),a("li",[s._v('**ENTRYPOINT：**配置容器，使其可执行化。配合CMD可省去"application"，只使用参数。')]),s._v(" "),a("li",[s._v("**LABEL：**用于为镜像添加元数据")]),s._v(" "),a("li",[s._v("**ENV：**设置环境变量")]),s._v(" "),a("li",[s._v("**EXPOSE：**指定于外界交互的端口")]),s._v(" "),a("li",[s._v("**VOLUME：**用于指定持久化目录")]),s._v(" "),a("li",[s._v("**WORKDIR：**工作目录，类似于cd命令")]),s._v(" "),a("li",[s._v("**USER：**指定运行容器时的用户名或 UID，后续的 RUN 也会使用指定用户。使用USER指定用户时，可以使用用户名、UID或GID，或是两者的组合。当服务不需要管理员权限时，可以通过该命令指定运行用户。并且可以在之前创建所需要的用户")]),s._v(" "),a("li",[s._v("**ARG：**用于指定传递给构建运行时的变量")]),s._v(" "),a("li",[s._v("**ONBUILD：**用于设置镜像触发器")])]),s._v(" "),a("h2",{attrs:{id:"from-构建新镜像是基于哪个镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#from-构建新镜像是基于哪个镜像"}},[s._v("#")]),s._v(" **FROM：**构建新镜像是基于哪个镜像")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n　　FROM "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n　　FROM "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("tag"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n　　FROM "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("image"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("digest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n例：FROM centos:latest\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##tag或digest是可选的，如果不使用这两个值时，会使用latest版本的基础镜像")]),s._v("\n")])])]),a("h2",{attrs:{id:"maintainer-镜像维护者姓名或邮箱地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#maintainer-镜像维护者姓名或邮箱地址"}},[s._v("#")]),s._v(" **MAINTAINER：**镜像维护者姓名或邮箱地址")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：MAINTAINER "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n例：\nMAINTAINER Attitude\nMAINTAINER Attitude@163.com\n")])])]),a("h2",{attrs:{id:"run-构建镜像时运行的shell命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-构建镜像时运行的shell命令"}},[s._v("#")]),s._v(" **RUN：**构建镜像时运行的shell命令")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：RUN "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("command"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n例： RUN yum update\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##RUN指令创建的中间镜像会被缓存，并会在下次构建中使用。如果不想使用这些缓存镜像，可以在构建时指定--no-cache参数，如：docker build --no-cache")]),s._v("\n")])])]),a("h2",{attrs:{id:"add-将本地文件添加到容器中"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-将本地文件添加到容器中"}},[s._v("#")]),s._v(" **ADD：**将本地文件添加到容器中")]),s._v(" "),a("p",[s._v("将本地文件添加到容器中，tar类型文件会自动解压(网络压缩资源不会被解压)，可以访问网络资源，类似wget")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    ADD "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n    ADD "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<src>"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(". "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<dest>"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 用于支持包含空格的路径\n例：\n    ADD hom* /mydir/          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 添加所有以"hom"开头的文件')]),s._v("\n    ADD hom?.txt /mydir/      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# ? 替代一个单字符,例如："home.txt"')]),s._v("\n    ADD "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" relativeDir/     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 添加 "test" 到 `WORKDIR`/relativeDir/')]),s._v("\n    ADD "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" /absoluteDir/    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 添加 "test" 到 /absoluteDir/')]),s._v("\n")])])]),a("h2",{attrs:{id:"copy-功能类似add"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copy-功能类似add"}},[s._v("#")]),s._v(" **COPY：**功能类似ADD")]),s._v(" "),a("p",[s._v("功能类似ADD，但是是不会自动解压文件，也不能访问网络资源")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    COPY "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("dest"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n例：\n    COPY run.sh /usr/bin\n")])])]),a("h2",{attrs:{id:"cmd-构建容器后调用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cmd-构建容器后调用"}},[s._v("#")]),s._v(" **CMD：**构建容器后调用")]),s._v(" "),a("p",[s._v("构建容器后调用，也就是在容器启动时才进行调用。")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    CMD "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"executable"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param1"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("执行可执行文件，优先"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    CMD "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param1"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("设置了ENTRYPOINT，则直接调用ENTRYPOINT添加参数"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    CMD "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" param1 param2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("执行shell内部命令"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n示例：\n    CMD "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"This is a test."')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" -\n    CMD "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/bin/wc"')]),s._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"--help"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##CMD不同于RUN，CMD用于指定在容器启动时所要执行的命令，而RUN用于指定镜像构建时所要执行的命令。")]),s._v("\n")])])]),a("h2",{attrs:{id:"entrypoint-配置容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#entrypoint-配置容器"}},[s._v("#")]),s._v(" **ENTRYPOINT：**配置容器")]),s._v(" "),a("p",[s._v('配置容器，使其可执行化。配合CMD可省去"application"，只使用参数。')]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    ENTRYPOINT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"executable"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param1"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"param2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("可执行文件, 优先"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    ENTRYPOINT "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("command")]),s._v(" param1 param2 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("shell内部命令"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n示例：\n    FROM ubuntu\n    ENTRYPOINT "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"top"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-b"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    CMD "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\nENTRYPOINT与CMD非常类似，不同的是通过，docker run，执行的命令不会覆ENTRYPOINT，\n而docker run 命令中指定的任何参数，都会被当做参数再次传递给ENTRYPOINT。Dockerfile中只允许有一个ENTRYPOINT命令，多指定时会覆盖前面的设置，而只执行最后的ENTRYPOINT指令。\n")])])]),a("h2",{attrs:{id:"label-用于为镜像添加元数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#label-用于为镜像添加元数据"}},[s._v("#")]),s._v(" **LABEL：**用于为镜像添加元数据")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    LABEL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n示例：\n　　LABEL "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("version")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1.0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("description")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个Web服务器"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("by")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"IT笔录"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##使用LABEL指定元数据时，一条LABEL指定可以指定一或多条元数据，指定多条元数据时不同元数据之间通过空格分隔。推荐将所有的元数据通过一条LABEL指令指定，以免生成过多的中间镜像。")]),s._v("\n")])])]),a("h2",{attrs:{id:"env-设置环境变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#env-设置环境变量"}},[s._v("#")]),s._v(" **ENV：**设置环境变量")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    ENV "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#<key>之后的所有内容均会被视为其<value>的组成部分，因此，一次只能设置一个变量")]),s._v("\n    ENV "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("key"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#可以设置多个变量，每个变量为一个"<key>=<value>"的键值对，如果<key>中包含空格，可以使用\\来进行转义，也可以通过""来进行标示；另外，反斜线也可以用于续行')]),s._v("\n示例：\n    ENV myName John Doe\n    ENV myDog Rex The Dog\n    ENV "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("myCat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fluffy\n")])])]),a("h2",{attrs:{id:"expose-指定于外界交互的端口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#expose-指定于外界交互的端口"}},[s._v("#")]),s._v(" **EXPOSE：**指定于外界交互的端口")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    EXPOSE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("port"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n示例：\n    EXPOSE "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v("\n    EXPOSE "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n    EXPOSE "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11211")]),s._v("/tcp "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("11211")]),s._v("/udp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## EXPOSE并不会让容器的端口访问到主机。要使其可访问，需要在 docker run 运行容器时通过 -p 来发布这些端口，或通过 -P 参数来发布EXPOSE导出的所有端口")]),s._v("\n")])])]),a("h2",{attrs:{id:"volume-用于指定持久化目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#volume-用于指定持久化目录"}},[s._v("#")]),s._v(" **VOLUME：**用于指定持久化目录")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    VOLUME "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/path/to/dir"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n示例：\n    VOLUME "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/data"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    VOLUME "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/www"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/log/apache2"')]),s._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/apache2"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###")]),s._v("\n一个卷可以存在于一个或多个容器的指定目录，该目录可以绕过联合文件系统，并具有以下功能：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 卷可以容器间共享和重用\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 容器并不一定要和其它容器共享卷\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 修改卷后会立即生效\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 对卷的修改不会对镜像产生影响\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" 卷会一直存在，直到没有任何容器在使用它\n")])])]),a("h2",{attrs:{id:"workdir-工作目录-类似于cd命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workdir-工作目录-类似于cd命令"}},[s._v("#")]),s._v(" **WORKDIR：**工作目录，类似于cd命令")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    WORKDIR /path/to/workdir\n示例：\n    WORKDIR /a  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("这时工作目录为/a"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    WORKDIR b  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("这时工作目录为/a/b"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    WORKDIR c  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("这时工作目录为/a/b/c"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##通过WORKDIR设置工作目录后，Dockerfile中其后的命令RUN、CMD、ENTRYPOINT、ADD、COPY等命令都会在该目录下执行，在使用 docker run 运行容器时，可以通过-w参数覆盖构建时所设置的工作目录。")]),s._v("\n")])])]),a("h2",{attrs:{id:"user-指定运行容器时的用户名或-uid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#user-指定运行容器时的用户名或-uid"}},[s._v("#")]),s._v(" "),a("strong",[s._v("USER")]),s._v("：指定运行容器时的用户名或 UID")]),s._v(" "),a("p",[s._v("指定运行容器时的用户名或 UID，后续的 RUN 也会使用指定用户。使用USER指定用户时，可以使用用户名、UID或GID，或是两者的组合。当服务不需要管理员权限时，可以通过该命令指定运行用户。并且可以在之前创建所需要的用户")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v(" 格式:\n　　"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" user\n　　"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" user:group\n　　"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" uid\n　　"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" uid:gid\n　　"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" user:gid\n　　"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" uid:group\n\n 示例：\n　　"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(" www\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##使用USER指定用户后，Dockerfile中其后的命令RUN、CMD、ENTRYPOINT都将使用该用户。镜像构建完成后，通过docker run运行容器时，可以通过-u参数来覆盖所指定的用户。")]),s._v("\n")])])]),a("h2",{attrs:{id:"arg-用于指定传递给构建运行时的变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arg-用于指定传递给构建运行时的变量"}},[s._v("#")]),s._v(" **ARG：**用于指定传递给构建运行时的变量")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n    ARG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("default value"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n示例：\n    ARG site\n    ARG "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("build_user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("www\n")])])]),a("h2",{attrs:{id:"onbuild-用于设置镜像触发器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onbuild-用于设置镜像触发器"}},[s._v("#")]),s._v(" **ONBUILD：**用于设置镜像触发器")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("格式：\n　　ONBUILD "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("INSTRUCTION"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n示例：\n　　ONBUILD ADD "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" /app/src\n　　ONBUILD RUN /usr/local/bin/python-build --dir /app/src\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##当所构建的镜像被用做其它镜像的基础镜像，该镜像中的触发器将会被钥触发")]),s._v("\n")])])]),a("h1",{attrs:{id:"build镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build镜像"}},[s._v("#")]),s._v(" "),a("strong",[s._v("Build镜像")])]),s._v(" "),a("h2",{attrs:{id:"格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式"}},[s._v("#")]),s._v(" 格式")]),s._v(" "),a("p",[s._v("docker build [OPTIONS] PATH | URL | - [flags]")]),s._v(" "),a("h2",{attrs:{id:"常用选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常用选项"}},[s._v("#")]),s._v(" 常用选项")]),s._v(" "),a("p",[s._v("-t, --tag list ：镜像名称")]),s._v(" "),a("p",[s._v("-f, --file string ：指定Dockerfile文件位置")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("使用方式\ndocker build "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t shykes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myapp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" \ndocker build "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t shykes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myapp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("path"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Dockerfile")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("path \ndocker build "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("t shykes"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("myapp http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Dockerfile")]),s._v("\n")])])]),a("h2",{attrs:{id:"其它选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它选项"}},[s._v("#")]),s._v(" 其它选项")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("--build-arg：设置构建时的变量\n--no-cache：默认false。设置该选项，将不使用Build Cache构建镜像\n--pull：默认false。设置该选项，总是尝试pull镜像的最新版本\n--compress：默认false。设置该选项，将使用gzip压缩构建的上下文\n--disable-content-trust：默认true。设置该选项，将对镜像进行验证\n--isolation：默认--isolation"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"default"')]),s._v("，即Linux命名空间；其他还有process或hyperv\n--label：为生成的镜像设置metadata\n--squash：默认false。设置该选项，将新构建出的多个层压缩为一个新层，但是将无法在多个镜像之间共享新层；设置该选项，实际上是创建了新image，同时保留原有image。\n--network：默认default。设置该选项，Set the networking mode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the RUN instructions during build\n--quiet, -q：默认false。设置该选项，Suppress the build output and print image ID on success\n--force-rm：默认false。设置该选项，总是删除掉中间环节的容器\n--rm：默认--rm"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true，即整个构建过程成功后删除中间环节的容器\n")])])]),a("h1",{attrs:{id:"dockerfile构建lnmp平台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile构建lnmp平台"}},[s._v("#")]),s._v(" Dockerfile构建LNMP平台")]),s._v(" "),a("h2",{attrs:{id:"dockerfile之nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile之nginx"}},[s._v("#")]),s._v(" "),a("strong",[s._v("dockerfile之nginx")])]),s._v(" "),a("p",[s._v("nginx版本：nginx-1.14.0.tar.gz")]),s._v(" "),a("p",[s._v("持久化资源目录：/usr/local/nginx/html")]),s._v(" "),a("h3",{attrs:{id:"dockerfile-nginx文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-nginx文件"}},[s._v("#")]),s._v(" dockerfile_nginx文件")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("FROM centos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\nMAINTAINER MSG\nCOPY nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nRUN yum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y install wget "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("yum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" mv "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repo "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("J "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" wget http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mirrors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("help"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.")]),s._v("repo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" mv "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.")]),s._v("repo "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum makecache "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y install unzip epel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("release gcc gcc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" autoconf automake zlib zlib"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel openssl openssl"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel pcre"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum clean all "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" rm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cache"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("yum"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" tar zxf nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" cd nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.14")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("/configure "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_dav_module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_stub_status_module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_addition_module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_sub_module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_flv_module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_mp4_module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("with")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("http_ssl_module "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" make "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("j "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" make install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" rm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/* &&  cd / && rm -rf nginx* && ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nENV PATH $PATH:/usr/local/nginx/sbin\nCOPY nginx.conf /usr/local/nginx/conf/nginx.conf\nWORKDIR /usr/local/nginx\nEXPOSE 80\nCMD ["nginx", "-g", "daemon off;"]\n')])])])]),a("h3",{attrs:{id:"nginx-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx-conf"}},[s._v("#")]),s._v(" nginx.conf")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("user                 nobody"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nworker_processes     "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nworker_rlimit_nofile "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nerror_log  logs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log  notice"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\npid        "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nevents "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    use epoll"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    worker_connections  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nhttp "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    include       mime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("types"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    default_type  application"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("octet"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("stream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    log_format  main "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$remote_addr - $remote_user [$time_local] \"$request\" '")]),s._v("\n                      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'$status $body_bytes_sent \"$http_referer\" '")]),s._v("\n                      "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'"$http_user_agent" "$http_x_forwarded_for"\'')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    access_log off"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    keepalive_timeout  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("65")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    client_max_body_size         "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        index index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        access_log logs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ctnrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com_access"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        error_log logs"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ctnrs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com_error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n        # location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("*\\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("js"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("css"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("png"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("gif"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jpg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("jpeg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            root "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        location "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" \\"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("php$ "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            root "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nginx"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            fastcgi_pass lnmp_php"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            include fastcgi_params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("h2",{attrs:{id:"dockerfile之php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile之php"}},[s._v("#")]),s._v(" "),a("strong",[s._v("dockerfile之php")])]),s._v(" "),a("p",[s._v("nginx版本：php-5.6.36.tar.gz")]),s._v(" "),a("p",[s._v("持久化资源目录：/usr/local/nginx/html")]),s._v(" "),a("p",[s._v("别问为什么php也要持久化，百度下就知道了")]),s._v(" "),a("h3",{attrs:{id:"dockerfilephp"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dockerfilephp"}},[s._v("#")]),s._v(" dockerfilephp")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("FROM centos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("\nMAINTAINER MSG\nCOPY php"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.6")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".36")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gz "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nRUN yum "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y install wget "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("  cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("yum"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repos"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("d"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" mv "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repo "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("J "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" wget http"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mirrors"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("help"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.")]),s._v("repo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" mv "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS7")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("163.")]),s._v("repo "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CentOS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Base")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("repo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum makecache "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum install epel"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("release "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum install "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("y gcc gcc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("c"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),s._v(" make gd"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel libxml2"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel libcurl"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel libjpeg"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel libpng"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel openssl"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel libmcrypt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel libxslt"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel libtidy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("devel autoconf iproute net"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("tools telnet wget curl "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" yum clean all "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" rm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("rf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cache"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("yum"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/* && cd / && tar zxf php-5.6.36.tar.gz && cd php-5.6.36 && ./configure --prefix=/usr/local/php --with-config-file-path=/usr/local/php/etc --enable-fpm --enable-opcache --with-mysql --with-mysqli --with-pdo-mysql --with-openssl --with-zlib --with-curl --with-gd --with-jpeg-dir --with-png-dir --with-freetype-dir --enable-mbstring --with-mcrypt --enable-hash && make -j 4 && make install && cp php.ini-production /usr/local/php/etc/php.ini && cp sapi/fpm/php-fpm.conf /usr/local/php/etc/php-fpm.conf && sed -i "90a \\daemonize = no" /usr/local/php/etc/php-fpm.conf && mkdir /usr/local/php/log &&  cd / && rm -rf php* && ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\n\nENV PATH $PATH:/usr/local/php/sbin\nCOPY php.ini /usr/local/php/etc/\nCOPY php-fpm.conf /usr/local/php/etc/\nWORKDIR /usr/local/php\nEXPOSE 9000\nCMD ["php-fpm"]\n')])])])]),a("h3",{attrs:{id:"php-fpm-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-fpm-conf"}},[s._v("#")]),s._v(" php-fpm.conf")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("global"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\npid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("run"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("pid\nerror_log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("php"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("fpm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log\nlog_level "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" warning\nemergency_restart_interval "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("h\nprocess_control_timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("s\ndaemonize "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" no \nrlimit_files "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nuser "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nobody\ngroup "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nobody\nlisten "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v("\nlisten"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("owner "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nobody\nlisten"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("group "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nobody\npm "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" dynamic\npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_children "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("\npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("start_servers "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("min_spare_servers "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_spare_servers "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_requests "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("51200")]),s._v("\npm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("status_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("status\nslowlog "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" log"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("$pool"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slow\nrequest_slowlog_timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nrequest_terminate_timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v(" \nrlimit_files "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10240")]),s._v("\n")])])]),a("h3",{attrs:{id:"php-ini"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#php-ini"}},[s._v("#")]),s._v(" php.ini")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("PHP"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nengine "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nshort_open_tag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nasp_tags "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nprecision "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("\noutput_buffering "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nzlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("output_compression "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nimplicit_flush "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nunserialize_callback_func "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nserialize_precision "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("17")]),s._v("\ndisable_functions "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\ndisable_classes "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nzend"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enable_gc "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nexpose_php "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nmax_execution_time "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\nmax_input_time "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nmemory_limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("M\nerror_reporting "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" E_ALL "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),s._v("E_DEPRECATED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("E_STRICT")]),s._v("\ndisplay_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\ndisplay_startup_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nlog_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nlog_errors_max_len "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1024")]),s._v("\nignore_repeated_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nignore_repeated_source "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nreport_memleaks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\ntrack_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nhtml_errors "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nvariables_order "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GPCS"')]),s._v("\nrequest_order "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"GP"')]),s._v("\nregister_argc_argv "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nauto_globals_jit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\npost_max_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("M\nauto_prepend_file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nauto_append_file "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\ndefault_mimetype "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text/html"')]),s._v("\ndefault_charset "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"UTF-8"')]),s._v("\ndoc_root "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nuser_dir "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nenable_dl "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nfile_uploads "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nupload_max_filesize "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("M\nmax_file_uploads "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v("\nallow_url_fopen "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nallow_url_include "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\ndefault_socket_timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("CLI "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Server")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ncli_server"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("color "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Date")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ndate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("timezone "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Asia")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Shanghai")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("filter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("iconv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("intl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sqlite3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Pcre")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Pdo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Pdo_mysql")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\npdo_mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\npdo_mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_socket"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Phar")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mail function"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nSMTP "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" localhost\nsmtp_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("25")]),s._v("\nmail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("add_x_header "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("SQL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("safe_mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ODBC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nodbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nodbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("check_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nodbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nodbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_links "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nodbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaultlrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nodbc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("defaultbinmode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Interbase")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nibase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nibase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nibase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_links "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nibase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("timestampformat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%Y-%m-%d %H:%M:%S"')]),s._v("\nibase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("dateformat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%Y-%m-%d"')]),s._v("\nibase"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("timeformat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"%H:%M:%S"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySQL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow_local_infile "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_links "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_socket "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_host "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("connect_timeout "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("trace_mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("MySQLi")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_links "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cache_size "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2000")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_socket "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_host "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("default_pw "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nmysqli"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("reconnect "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqlnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmysqlnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collect_statistics "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nmysqlnd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("collect_memory_statistics "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("OCI8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PostgreSQL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\npgsql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\npgsql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auto_reset_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\npgsql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\npgsql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_links "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\npgsql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ignore_notice "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\npgsql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("log_notice "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Sybase")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("CT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsybct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nsybct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsybct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_links "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsybct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("min_server_severity "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nsybct"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("min_client_severity "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bcmath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbcmath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("scale "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("browscap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Session")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("save_handler "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" files\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("use_strict_mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("use_cookies "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("use_only_cookies "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PHPSESSID\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("auto_start "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie_lifetime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie_path "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie_domain "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cookie_httponly "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("serialize_handler "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" php\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gc_probability "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gc_divisor "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("gc_maxlifetime "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1440")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("referer_check "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cache_limiter "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" nocache\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cache_expire "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("180")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("use_trans_sid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hash_function "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nsession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("hash_bits_per_character "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\nurl_rewriter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tags "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"a=href,area=href,frame=src,input=src,form=fakeentry"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("MSSQL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nmssql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("allow_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("On")]),s._v("\nmssql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_persistent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nmssql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_links "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nmssql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("min_error_severity "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nmssql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("min_message_severity "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("\nmssql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compatibility_mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\nmssql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("secure_connection "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Assertion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("COM"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mbstring"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("gd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("exif"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Tidy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ntidy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("clean_output "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Off")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("soap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nsoap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wsdl_cache_enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nsoap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wsdl_cache_dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/tmp"')]),s._v("\nsoap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wsdl_cache_ttl"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("86400")]),s._v("\nsoap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("wsdl_cache_limit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sysvshm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ldap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nldap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_links "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mcrypt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("dba"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("opcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nopcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nopcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("enable_cli"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nopcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("memory_consumption"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("\nopcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("interned_strings_buffer"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\nopcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("max_accelerated_files"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20000")]),s._v("\nopcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("use_cwd"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nopcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("validate_timestamps"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nopcache"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("revalidate_freq"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("curl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("openssl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),a("h2",{attrs:{id:"关于mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关于mysql"}},[s._v("#")]),s._v(" "),a("strong",[s._v("关于Mysql")])]),s._v(" "),a("p",[a("strong",[s._v("关于mysql，我采用的是官方的镜像，因为在制作mysql镜像时，老是出错，系统空间不足，反应超时，连接出错等，奇葩错误")])]),s._v(" "),a("h2",{attrs:{id:"生成镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成镜像"}},[s._v("#")]),s._v(" "),a("strong",[s._v("生成镜像")])]),s._v(" "),a("p",[s._v("生成的镜像就存储在当前docker程序中")]),s._v(" "),a("h3",{attrs:{id:"生成nginx镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成nginx镜像"}},[s._v("#")]),s._v(" 生成nginx镜像")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker build -t nginx:v1 -f dockerfile_nginx "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),a("h3",{attrs:{id:"生成php镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成php镜像"}},[s._v("#")]),s._v(" 生成php镜像")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker build -t php:v1 -f dockerfile_php "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n")])])]),a("h3",{attrs:{id:"生成mysql镜像"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#生成mysql镜像"}},[s._v("#")]),s._v(" 生成mysql镜像")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker image pull mysql:5.7\n")])])]),a("h2",{attrs:{id:"构建wordpress博客实例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建wordpress博客实例"}},[s._v("#")]),s._v(" "),a("strong",[s._v("构建wordpress博客实例")])]),s._v(" "),a("h3",{attrs:{id:"创建容器网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建容器网络"}},[s._v("#")]),s._v(" 创建容器网络")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker network create lnmp\n")])])]),a("h3",{attrs:{id:"创建mysql容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建mysql容器"}},[s._v("#")]),s._v(" 创建MysqL容器")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("docker run "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("name lnmp_mysql "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("net lnmp "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("mount src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql_vol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dst"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mysql "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e MYSQL_ROOT_PASSWORD"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("e MYSQL_DATABASE"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("wordpress mysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("character"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("set"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("server"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\n")])])]),a("h3",{attrs:{id:"创建php容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建php容器"}},[s._v("#")]),s._v(" 创建PHP容器")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker run -d --name lnmp_php --net lnmp --mount "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("src")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx_ls,dst"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/html/ php:v1\n")])])]),a("h3",{attrs:{id:"创建nginx容器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建nginx容器"}},[s._v("#")]),s._v(" 创建nginx容器")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("docker container run -d -p89:80 --name lnmp_nginx --net lnmp --mount "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("src")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx_ls,dst"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/nginx/html/ nginx:v1\n")])])]),a("h3",{attrs:{id:"部署wordpress博客"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署wordpress博客"}},[s._v("#")]),s._v(" 部署wordpress博客")]),s._v(" "),a("p",[s._v("wordpress博客版本：wordpress-4.9.4-zh_CN.tar.gz")]),s._v(" "),a("p",[s._v("自行查找nginx_ls数据卷的资源目录，把版本包放置nginx_ls数据卷中")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" -zxf wordpress-4.9.4-zh_CN.tar.gz \n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" wordpress/* "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" -rf wordpress wordpress-4.9.4-zh_CN.tar.gz\n")])])]),a("h3",{attrs:{id:"配置wordpress博客"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置wordpress博客"}},[s._v("#")]),s._v(" "),a("strong",[s._v("配置wordpress博客")])]),s._v(" "),a("h4",{attrs:{id:"进入wordpress博客web界面"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进入wordpress博客web界面"}},[s._v("#")]),s._v(" 进入wordpress博客web界面")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("本机IP加:89\n")])])]),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/JF0aKH",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s1.ax1x.com/2020/04/16/JF0aKH.png",alt:"JF0aKH.png"}}),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"配置数据库信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置数据库信息"}},[s._v("#")]),s._v(" 配置数据库信息")]),s._v(" "),a("ol",[a("li",[s._v("数据库名跟密码：在创建mysql容器的时候已经配置好\n"),a("ol",[a("li",[s._v("MYSQL_ROOT_PASSWORD=123456 -e MYSQL_DATABASE=wordpress")])])]),s._v(" "),a("li",[s._v('用户名：mysql容器默认用户名为 "root"')]),s._v(" "),a("li",[s._v("数据库主机\n"),a("ol",[a("li",[s._v("如果不使用容器正常填写是mysql机器的IP地址")]),s._v(" "),a("li",[s._v("使用容器跟自定义网段，就填写Mysql容器的主机名")])])])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2020/04/16/JFBUYV.png",alt:"JFBUYV.png"}})]),s._v(" "),a("h4",{attrs:{id:"需要手动配置wp-config-php"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需要手动配置wp-config-php"}},[s._v("#")]),s._v(" 需要手动配置wp-config.php")]),s._v(" "),a("p",[s._v("将标红框中的代码全部复制，然后在nginx_ls数据卷的目录中创建wp-config.php，再把刚刚复制的代码拷贝进去")]),s._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /var/lib/docker/volumes/nginx_ls/_data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" wp-config.php\n")])])]),a("p",[a("a",{attrs:{href:"https://imgchr.com/i/JFDSmj",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://s1.ax1x.com/2020/04/16/JFDSmj.png",alt:"JFDSmj.png"}}),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"配置站点信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置站点信息"}},[s._v("#")]),s._v(" 配置站点信息")]),s._v(" "),a("p",[s._v("接下的内容自行填写")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://s1.ax1x.com/2020/04/16/JFs6Ts.png",alt:"JFs6Ts.png"}})]),s._v(" "),a("p",[a("strong",[s._v("完结，这样子就通过dockefile来创建一个LNMP平台+博客系统")])])])}),[],!1,null,null,null);t.default=n.exports}}]);