(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{377:function(a,s,e){"use strict";e.r(s);var t=e(45),r=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"_4-kubectl命令行管理工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-kubectl命令行管理工具"}},[a._v("#")]),a._v(" 4. kubectl命令行管理工具")]),a._v(" "),e("h1",{attrs:{id:"kubectl命令行管理工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubectl命令行管理工具"}},[a._v("#")]),a._v(" "),e("strong",[a._v("kubectl命令行管理工具")])]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s1.ax1x.com/2020/04/23/JacOHA.png",alt:"JacOHA.png"}})]),a._v(" "),e("p",[e("img",{attrs:{src:"https://s1.ax1x.com/2020/04/23/JagBbd.png",alt:"JagBbd.png"}})]),a._v(" "),e("h1",{attrs:{id:"kubectl项目发布最常用的命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubectl项目发布最常用的命令"}},[a._v("#")]),a._v(" kubectl项目发布最常用的命令")]),a._v(" "),e("p",[a._v("就从最简单的创建项目，发布项目，更新项目，回滚项目，删除项目")]),a._v(" "),e("h2",{attrs:{id:"创建项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建项目"}},[a._v("#")]),a._v(" 创建项目")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl run nginx --replicas"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("3")]),a._v(" --image"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nginx:1.14 --port"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 创建的项目名为：nginx")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 节点为：3个")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 镜像为：nginx1.14版本镜像")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 内部端口为：80")]),a._v("\n\nkubectl get deploy,pods\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## deploy：查看所有项目有几个节点")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## pods：查看所有节点")]),a._v("\n")])])]),e("h2",{attrs:{id:"发布项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#发布项目"}},[a._v("#")]),a._v(" 发布项目")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl expose deployment nginx --port"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("88")]),a._v(" --type"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("NodePort --target-port"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(" --name"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nginx-service\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 暴露端口")]),a._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 容器内部端口：80")]),a._v("\n\t"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 集群数据互通端口：88")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 服务类型：NodePort")]),a._v("\n\nkubectl get "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 查看所有类型的大概信息")]),a._v("\n")])])]),e("h2",{attrs:{id:"更新项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新项目"}},[a._v("#")]),a._v(" 更新项目")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("set")]),a._v(" image deployment/nginx "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("nginx")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nginx:1.15\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 把nginx版本更新为1.15")]),a._v("\n")])])]),e("h2",{attrs:{id:"回滚项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#回滚项目"}},[a._v("#")]),a._v(" 回滚项目")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl rollout "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("history")]),a._v(" deployment/nginx\nkubectl rollout undo deployment/nginx\n")])])]),e("h2",{attrs:{id:"删除项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除项目"}},[a._v("#")]),a._v(" 删除项目")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl delete deploy/nginx\nkubectl delete svc/nginx-service\n")])])]),e("h1",{attrs:{id:"kubectl常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#kubectl常用命令"}},[a._v("#")]),a._v(" "),e("strong",[a._v("kubectl常用命令")])]),a._v(" "),e("h2",{attrs:{id:"查看类命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看类命令"}},[a._v("#")]),a._v(" "),e("strong",[a._v("查看类命令")])]),a._v(" "),e("h3",{attrs:{id:"获取节点相应服务的信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取节点相应服务的信息"}},[a._v("#")]),a._v(" 获取节点相应服务的信息")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get nodes\n")])])]),e("h3",{attrs:{id:"获取pod的相关信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#获取pod的相关信息"}},[a._v("#")]),a._v(" "),e("strong",[a._v("获取pod的相关信息")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get pods\n")])])]),e("h4",{attrs:{id:"selector名来查找"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#selector名来查找"}},[a._v("#")]),a._v(" selector名来查找")]),a._v(" "),e("p",[e("strong",[a._v("如果需要按selector名来查找相应的pod信息， 可以通过以下命令查看")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get pod --selector "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("name")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("tomcat\n")])])]),e("h3",{attrs:{id:"查看k8s集群信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看k8s集群信息"}},[a._v("#")]),a._v(" 查看K8S集群信息")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl cluster-info\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 查看完整信息")]),a._v("\nkubectl cluster-info dump\n")])])]),e("h3",{attrs:{id:"查看各组件信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看各组件信息"}},[a._v("#")]),a._v(" 查看各组件信息")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl -s http://localhost:8080 get componentstatuses\nkubectl get cs\n")])])]),e("h3",{attrs:{id:"查看pods-容器-所在的运行节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看pods-容器-所在的运行节点"}},[a._v("#")]),a._v(" "),e("strong",[a._v("查看pods(容器)所在的运行节点")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get pods -o wide\n")])])]),e("h4",{attrs:{id:"通过某个命名空间查找节点信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过某个命名空间查找节点信息"}},[a._v("#")]),a._v(" 通过某个命名空间查找节点信息")]),a._v(" "),e("p",[e("strong",[a._v("如果需要通过某个命名空间查找节点信息， 可以通过以下命令查看：")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get pods -o wide -n kube-system\n\n-o wide 选项表示展示更多的Pod节点信息\n-n "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("命名空间"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" 表示查询该命名空间下的Pod节点信息\n")])])]),e("h4",{attrs:{id:"找所有命名空间的节点信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#找所有命名空间的节点信息"}},[a._v("#")]),a._v(" 找所有命名空间的节点信息")]),a._v(" "),e("p",[e("strong",[a._v("如果需要查找所有命名空间下的所有Pod信息， 可以通过以下命令：")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get pods --all-namespaces\n或\nkubectl get pods -o wide --all-namespaces "),e("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#列出更多的详细信息")]),a._v("\n")])])]),e("h3",{attrs:{id:"查看pods定义的详细信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看pods定义的详细信息"}},[a._v("#")]),a._v(" 查看pods定义的详细信息")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get pods -o yaml\n")])])]),e("h3",{attrs:{id:"查看运行的pod的环境变量"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看运行的pod的环境变量"}},[a._v("#")]),a._v(" 查看运行的pod的环境变量")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pod名称"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v("\nkubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" nginx-5c7588df-45gzq "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("env")]),a._v("\n")])])]),e("h3",{attrs:{id:"查看指定pod的日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看指定pod的日志"}},[a._v("#")]),a._v(" 查看指定pod的日志")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl logs -f pods/"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pod名称"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" -n kube-system\n")])])]),e("h3",{attrs:{id:"查看集群节点信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看集群节点信息"}},[a._v("#")]),a._v(" "),e("strong",[a._v("查看集群节点信息")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get nodes\nkubectl get node\n")])])]),e("h4",{attrs:{id:"集群名称为zone下的集群节点信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#集群名称为zone下的集群节点信息"}},[a._v("#")]),a._v(" 集群名称为zone下的集群节点信息")]),a._v(" "),e("p",[e("strong",[a._v("如果需要查看集群名称为zone下的集群节点信息, 可以使用以下命令")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get nodes -l zone\n")])])]),e("h3",{attrs:{id:"查看某个命名空间下的所有service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看某个命名空间下的所有service"}},[a._v("#")]),a._v(" 查看某个命名空间下的所有service")]),a._v(" "),e("p",[e("strong",[a._v("查看某个命名空间(如kube-system)下的所有service")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get services kubernetes-dashboard -n kube-system\n")])])]),e("h3",{attrs:{id:"查看某个命名空间下的所有发布信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看某个命名空间下的所有发布信息"}},[a._v("#")]),a._v(" 查看某个命名空间下的所有发布信息")]),a._v(" "),e("p",[a._v("查看某个命名空间(如kube-system)下的所有发布信息")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl get deployment kubernetes-dashboard -n kube-system\n")])])]),e("h3",{attrs:{id:"查看资源信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查看资源信息"}},[a._v("#")]),a._v(" "),e("strong",[a._v("查看资源信息")])]),a._v(" "),e("h4",{attrs:{id:"根据service名查看资源信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#根据service名查看资源信息"}},[a._v("#")]),a._v(" 根据service名查看资源信息")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl describe service/kubernetes-dashboard --namespace"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kube-system"')]),a._v("\n")])])]),e("h4",{attrs:{id:"根据pod名称查看资源信息"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#根据pod名称查看资源信息"}},[a._v("#")]),a._v(" 根据pod名称查看资源信息")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl describe pods/kubernetes-dashboard-349859023-g6q8c --namespace"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"kube-system"')]),a._v("\nkubectl describe pod nginx-772ai\n")])])]),e("h2",{attrs:{id:"操作类命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#操作类命令"}},[a._v("#")]),a._v(" "),e("strong",[a._v("操作类命令")])]),a._v(" "),e("h3",{attrs:{id:"创建资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#创建资源"}},[a._v("#")]),a._v(" 创建资源")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl create -f "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件名.yaml"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h3",{attrs:{id:"重建资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#重建资源"}},[a._v("#")]),a._v(" 重建资源")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl replace -f "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件名 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("--force"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])])]),e("h3",{attrs:{id:"删除资源"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除资源"}},[a._v("#")]),a._v(" "),e("strong",[a._v("删除资源")])]),a._v(" "),e("h4",{attrs:{id:"强制删除某个文件名命名节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#强制删除某个文件名命名节点"}},[a._v("#")]),a._v(" 强制删除某个文件名命名节点")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl delete -f "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("文件名"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h4",{attrs:{id:"删除某个pod命令节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除某个pod命令节点"}},[a._v("#")]),a._v(" 删除某个Pod命令节点")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v(" kubectl delete pod "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("pod名"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h4",{attrs:{id:"删除某replication-controller命名节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除某replication-controller命名节点"}},[a._v("#")]),a._v(" 删除某Replication Controller命名节点")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v(" kubectl delete rc "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("rc名"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h4",{attrs:{id:"删除某个服务命名节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除某个服务命名节点"}},[a._v("#")]),a._v(" 删除某个服务命名节点")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v(" kubectl delete "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("service")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v("service名"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v("\n")])])]),e("h4",{attrs:{id:"删除所有pod节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除所有pod节点"}},[a._v("#")]),a._v(" 删除所有Pod节点")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl delete pod --all\n")])])]),e("h3",{attrs:{id:"动态伸缩操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#动态伸缩操作"}},[a._v("#")]),a._v(" "),e("strong",[a._v("动态伸缩操作")])]),a._v(" "),e("h4",{attrs:{id:"为某个名称为nginx动态扩展5个服务节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为某个名称为nginx动态扩展5个服务节点"}},[a._v("#")]),a._v(" 为某个名称为nginx动态扩展5个服务节点")]),a._v(" "),e("p",[e("strong",[a._v("为Replcation Controller名称为nginx动态扩展5个服务节点")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl scale rc nginx --replicas"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n")])])]),e("h4",{attrs:{id:"为redis-slave部署5个服务节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为redis-slave部署5个服务节点"}},[a._v("#")]),a._v(" 为redis-slave部署5个服务节点")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl scale deployment redis-slave --replicas"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("5")]),a._v("\n")])])]),e("h4",{attrs:{id:"为某个-yaml部署脚本的服务扩展2个节点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#为某个-yaml部署脚本的服务扩展2个节点"}},[a._v("#")]),a._v(" 为某个.yaml部署脚本的服务扩展2个节点")]),a._v(" "),e("p",[e("strong",[a._v("为redis-slave-deployment.yaml部署脚本下的服务扩展2个节点")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl scale --replicas"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),a._v(" -f redis-slave-deployment.yaml\n")])])]),e("h3",{attrs:{id:"进入pod节点容器内进行操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入pod节点容器内进行操作"}},[a._v("#")]),a._v(" 进入Pod节点容器内进行操作")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -it redis-master-1033017107-q47hh /bin/bash\n")])])]),e("h3",{attrs:{id:"pods节点容器标签操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pods节点容器标签操作"}},[a._v("#")]),a._v(" "),e("strong",[a._v("Pods节点容器标签操作")])]),a._v(" "),e("h4",{attrs:{id:"增加node节点label值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#增加node节点label值"}},[a._v("#")]),a._v(" 增加Node节点label值")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl label nodes node1 "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("zone")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("north\n")])])]),e("h4",{attrs:{id:"增加pod的label值-key-value"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#增加pod的label值-key-value"}},[a._v("#")]),a._v(" 增加Pod的label值 [key]=[value]")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl label pod redis-master-1033017107-q47hh "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("role")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("master\n")])])]),e("h4",{attrs:{id:"删除pod的label值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除pod的label值"}},[a._v("#")]),a._v(" 删除Pod的label值")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl label pod redis-master-1033017107-q47hh role-\n")])])]),e("h4",{attrs:{id:"修改pod的label值"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#修改pod的label值"}},[a._v("#")]),a._v(" 修改Pod的label值")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl label pod redis-master-1033017107-q47hh "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("role")]),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("backend --overwrite\n")])])]),e("h3",{attrs:{id:"滚动升级"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#滚动升级"}},[a._v("#")]),a._v(" "),e("strong",[a._v("滚动升级")])]),a._v(" "),e("h4",{attrs:{id:"配置文件滚动升级"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置文件滚动升级"}},[a._v("#")]),a._v(" 配置文件滚动升级")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl rolling-update redis-master -f redis-master-controller-v2.yaml\n")])])]),e("h4",{attrs:{id:"命令升级"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#命令升级"}},[a._v("#")]),a._v(" 命令升级")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl rolling-update redis-master --image"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("redis-master:2.0\n")])])]),e("h4",{attrs:{id:"pods版本回滚"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#pods版本回滚"}},[a._v("#")]),a._v(" Pods版本回滚")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("kubectl rolling-update redis-master --image"),e("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("redis-master:1.0 --rollback\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);