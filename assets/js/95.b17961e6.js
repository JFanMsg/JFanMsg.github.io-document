(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{459:function(s,t,a){"use strict";a.r(t);var n=a(45),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_31-模块的进阶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_31-模块的进阶"}},[s._v("#")]),s._v(" 31. 模块的进阶")]),s._v(" "),a("br"),s._v(" "),a("h1",{attrs:{id:"from导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#from导入"}},[s._v("#")]),s._v(" from导入")]),s._v(" "),a("p",[s._v("from可以在模块中导入指定的模块属性(对象)、也就是说把指定的模块的对象导入到当前空间来")]),s._v(" "),a("p",[s._v("使用格式：")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" 模块名 "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" 导入的对象名\n")])])]),a("br"),s._v(" "),a("h2",{attrs:{id:"模块文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块文件"}},[s._v("#")]),s._v(" 模块文件")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的打印输出"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的变量"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inso")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的函数"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("br"),s._v(" "),a("h2",{attrs:{id:"导入单对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入单对象"}},[s._v("#")]),s._v(" 导入单对象")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" inso\ninso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的打印输出\n这是一个自定义模块中的函数\n")])])]),a("br"),s._v(" "),a("h2",{attrs:{id:"导入多对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入多对象"}},[s._v("#")]),s._v(" 导入多对象")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" inso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("name\ninso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的打印输出\n这是一个自定义模块中的函数\n这是一个自定义模块中的变量\n")])])]),a("br"),s._v(" "),a("h2",{attrs:{id:"导入单对象时更名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入单对象时更名"}},[s._v("#")]),s._v(" 导入单对象时更名")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" inso "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" s\ns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的打印输出\n这是一个自定义模块中的函数\n")])])]),a("br"),s._v(" "),a("h2",{attrs:{id:"导入多对象时更名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导入多对象时更名"}},[s._v("#")]),s._v(" 导入多对象时更名")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" inso "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" nm\ns"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("nm"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的打印输出\n这是一个自定义模块中的函数\n这是一个自定义模块中的变量\n")])])]),a("br"),s._v(" "),a("h2",{attrs:{id:"符号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#符号"}},[s._v("#")]),s._v(" * 符号")]),s._v(" "),a("p",[s._v("*符号：代表导入模块中的所有对象")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\ninso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的打印输出\n这是一个自定义模块中的函数\n这是一个自定义模块中的变量\n")])])]),a("br"),s._v(" "),a("h2",{attrs:{id:"add-的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-的使用"}},[s._v("#")]),s._v(" __add__的使用")]),s._v(" "),a("p",[a("strong",[s._v("add")]),s._v("：用于模块文件，让模块文件限制 用 * 符号导入模块有多少变量，只是限制 * 符号")]),s._v(" "),a("p",[s._v("注意："),a("strong",[s._v("add")]),s._v(" 必须要用 中括号 [ ] ，允许用 * 的对象要用字符串类型输入")]),s._v(" "),a("p",[a("strong",[s._v("模块文件")])]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("__all__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'inso'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的打印输出"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的变量"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inso")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的函数"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),a("p",[a("strong",[s._v("py执行文件")])]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\ninso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的函数\nNameError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" name "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'name'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("is")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("not")]),s._v(" defined\n")])])]),a("br"),s._v(" "),a("h1",{attrs:{id:"把模块当成脚本执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#把模块当成脚本执行"}},[s._v("#")]),s._v(" 把模块当成脚本执行")]),s._v(" "),a("p",[s._v("python执行有二种模式：脚本执行跟模块执行")]),s._v(" "),a("p",[a("strong",[s._v("模块执行")])]),s._v(" "),a("ol",[a("li",[s._v("import")]),s._v(" "),a("li",[a("strong",[s._v("import")])]),s._v(" "),a("li",[s._v("from ... import")])]),s._v(" "),a("p",[a("strong",[s._v("脚本执行")])]),s._v(" "),a("ol",[a("li",[s._v("在pycharm中右键执行")]),s._v(" "),a("li",[s._v("在linux中，python 文件名 执行")]),s._v(" "),a("li",[s._v("等等")])]),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"name-判断是否在当前文件中执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#name-判断是否在当前文件中执行"}},[s._v("#")]),s._v(" "),a("strong",[s._v("name")]),s._v(" ：判断是否在当前文件中执行")]),s._v(" "),a("p",[s._v("先来看看__name__的执行效果")]),s._v(" "),a("p",[a("strong",[s._v("在模块当前执行")])]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("name "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的变量1"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inso")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的函数"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("__name__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n__main__\n")])])]),a("p",[a("strong",[s._v("在py文件中导入模块执行")])]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n执行结果：\nso_msg\n")])])]),a("p",[s._v('到这里有没有发现什么规律，__name__函数在模块的脚本执行返回的是"'),a("strong",[s._v("main")]),s._v('"，在另一个文件以模块导入的方式执行返回的是文件名"so_msg"，所以可以用这个__name__来判断是否是当前文件执行')]),s._v(" "),a("br"),s._v(" "),a("h3",{attrs:{id:"让模块文件有些代码只能在当地执行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#让模块文件有些代码只能在当地执行"}},[s._v("#")]),s._v(" 让模块文件有些代码只能在当地执行")]),s._v(" "),a("p",[s._v("使用__name__函数来进行判断，如果是当前文件就执行，如果不是当前文件就不执行")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##模块文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" __name__ "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"你好"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的变量1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inso")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的函数"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##py文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\ninso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的函数\n这是一个自定义模块中的变量"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),a("p",[s._v("这样子就可以让模块的一些执行输出，不会在导入模块的时候自动执行，也可以让模块文件能够脚本化，能当成模块文件，也能当成脚本文件")]),s._v(" "),a("p",[s._v("还可以这样理解：在编写py文件的时候，所有不在函数和类中封装的内容都应该写在，if "),a("strong",[s._v("name")]),s._v(" == '"),a("strong",[s._v("main")]),s._v("':这里")]),s._v(" "),a("br"),s._v(" "),a("h1",{attrs:{id:"反射在模块中的补充"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#反射在模块中的补充"}},[s._v("#")]),s._v(" 反射在模块中的补充")]),s._v(" "),a("p",[s._v('在反射中，是不是说过sys模块中的modules["'),a("strong",[s._v("main")]),s._v('"]，获取当前文件的内存地址')]),s._v(" "),a("p",[s._v('在这里在补充一点，sys模块中的modules["'),a("strong",[s._v("main")]),s._v('"]，无论是在模块中执行还是用于py文件执行都是显示当前执行空间的内存地址')]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 模块文件执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sys\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"__main__"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'D:/python/PyCharm资源/one/模块/so_msg.py'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## py文件执行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n执行结果：\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("module "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'__main__'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'D:/python/PyCharm资源/one/模块/模块初始.py'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),a("p",[s._v('有没有发现什么，为什么sys模块中的modules["'),a("strong",[s._v("main")]),s._v('"]，是在模块文件中的，在py文件中执行的结果竟然是py文件的内存地址。')]),s._v(" "),a("p",[s._v('这里强调一点，sys模块中的modules["'),a("strong",[s._v("main")]),s._v('"]，得到的结果来源于当前那个空间执行的py文件内存地址')]),s._v(" "),a("p",[s._v('那这样不是模块中不能使用反射了吗，因为反射的时候可以会用到sys模块中的modules["'),a("strong",[s._v("main")]),s._v('"]，来获取当前文件的内存地址，如果自己这样用，那么这个模块文件导入到另一个文件的时候，那反射还能正常用吗！！！')]),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"使用另一个方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用另一个方式"}},[s._v("#")]),s._v(" 使用另一个方式")]),s._v(" "),a("p",[s._v('把sys模块中的modules["'),a("strong",[s._v("main")]),s._v('"]中的__main__ 换成自己的__name__函数，因为modules出的值都会出于这文件关联的所有文件内存地址，__name__就是代表当前空间执行的文件的内存，其他文件都是以 {文件名:内存地址} 这种方式存储的，这样子使用__name__无论是在模块当前中执行也可以获取模块的内存地址，还是在Py文件导入模块的时候执行也可以获取模块的内存地址，这样子模块的反射就可以正常使用了')]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##模块文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" sys\nname "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的变量1"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inso")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的函数"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("getattr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("__name__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"inso"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("getattr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("sys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("modules"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("__name__"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"name"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("##py文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\n\n执行结果：\n这是一个自定义模块中的函数\n这是一个自定义模块中的变量"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),a("p",[s._v("​\t这样反射在模块文件中也可以正常使用，这样子也可以让模块文件当成脚本文件执行")]),s._v(" "),a("br"),s._v(" "),a("h1",{attrs:{id:"pyc编译文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pyc编译文件"}},[s._v("#")]),s._v(" pyc编译文件")]),s._v(" "),a("p",[s._v("当python执行import 模块名 时，就会在当前目录下的__pycache__中生成一个编译好的文件")]),s._v(" "),a("p",[s._v("如果__pycache__不存在，会默认创建的")]),s._v(" "),a("p",[s._v("为什么要编译生成呢，python执行时，其实也是在编译文件，只是编译存放在内存")]),s._v(" "),a("p",[s._v("但是模块呢，在Python认为模块是一个常用又不常修改的py文件，那么他就有一个机制，执行的时候会把编译文件存放在指定的目录中，等下次执行调用模块的时候就可以直接调用这个文件，就不用重新编译模块文件了")]),s._v(" "),a("p",[s._v("这样到以后做比较大的项目的时候，会有效的提升代码的执行顺序")]),s._v(" "),a("p",[s._v("那么如果模块文件被修改了呢，放心，Python会自动的重新生成编译文件覆盖过去")]),s._v(" "),a("p",[s._v("注意：提高的代码效率是指代码中模块的导入效率，并不是代码的其它效率")]),s._v(" "),a("br"),s._v(" "),a("h1",{attrs:{id:"重新加载模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重新加载模块"}},[s._v("#")]),s._v(" 重新加载模块")]),s._v(" "),a("p",[s._v("在py文件执行的时候，修改了已经导入的模块内容，是不生效的")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 模块文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inso")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的函数1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Py文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" time\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" so_msg "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v("\ninso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ninso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的函数\n这是一个自定义模块中的函数\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 当Py文件执行到time.sleep(5)的时候，就会停留5秒后在执行，这时候去修改模块文件的代码，可以看看等5秒后执行的是不是修改后的内容")]),s._v("\n")])])]),a("p",[s._v("那为什么不会生效呢，因为python执行时会把所有的包含模块的编译放在内存上，你修改的只是硬盘中的模块代码，又不是内存中编译好的内容，怎么可能会生效")]),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"使用importlib模块强制更新模块"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用importlib模块强制更新模块"}},[s._v("#")]),s._v(" 使用importlib模块强制更新模块")]),s._v(" "),a("p",[s._v("这个超级超级不建议使用")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 模块文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inso")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的函数"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## py文件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" time\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" importlib\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" so_msg\nso_msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("inso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\ntime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("sleep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nimportlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("reload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("so_msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nso_msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("inso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\n这是一个自定义模块中的函数\n这是一个自定义模块中的函数"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),a("br"),s._v(" "),a("h1",{attrs:{id:"模块的循环导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模块的循环导入"}},[s._v("#")]),s._v(" 模块的循环导入")]),s._v(" "),a("p",[s._v("模块的循环导入，只有一个原则：不允许使用")]),s._v(" "),a("p",[s._v("python中模块是无法做到循环相互导入的。")]),s._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 模块文件：so_msg")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" msg\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("inso")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是一个自定义模块中的函数1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Py执行文件：msg")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" so_msg\nso_msg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("inso"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n执行结果：\nAttributeError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" module "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'so_msg'")]),s._v(" has no attribute "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'inso'")]),s._v("\n")])])]),a("p",[s._v("为什么会提示找不到so_msg，因为so_msg文件执行是导入so_msg模块，从而执行so_msg模块文件，so_msg模块文件又从头开始执行，第一行代码就是导入msg模块，那么又会回来msg文件中从头开始执行，这时import msg，还会不会执行！！！")]),s._v(" "),a("p",[s._v("答案是不会，因为这模块文件已经编译导入内存中，Python会自动检测，如果发现导入过一次就不会在执行导入操作，那这样子，就到了执行代码环节")]),s._v(" "),a("p",[s._v("为什么会找不到，执行so_msg.inso()，那么在so_msg模块中的inso()函数会执行到没，没执行到那怎么找得到")]),s._v(" "),a("p",[s._v("所以在这建议永远不要写循环的模块架构")]),s._v(" "),a("br"),s._v(" "),a("br")])}),[],!1,null,null,null);t.default=r.exports}}]);