(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{382:function(a,s,t){"use strict";t.r(s);var e=t(45),r=Object(e.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"_4-docker之容器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-docker之容器"}},[a._v("#")]),a._v(" 4. docker之容器")]),a._v(" "),t("h1",{attrs:{id:"创建容器之run命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建容器之run命令"}},[a._v("#")]),a._v(" "),t("strong",[a._v("创建容器之run命令")])]),a._v(" "),t("h2",{attrs:{id:"使用格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用格式"}},[a._v("#")]),a._v(" 使用格式")]),a._v(" "),t("ol",[t("li",[a._v("docker container run 选项 镜像名  -- 推荐使用")]),a._v(" "),t("li",[a._v("docker run 选项 镜像名")])]),a._v(" "),t("h2",{attrs:{id:"容器常用选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器常用选项"}},[a._v("#")]),a._v(" 容器常用选项")]),a._v(" "),t("ol",[t("li",[t("p",[a._v("-i, –interactive：分配一个交互式环境")])]),a._v(" "),t("li",[t("p",[a._v("-t, –tty：分配一个伪终端")])]),a._v(" "),t("li",[t("p",[a._v("-d, –detach：运行容器到后台")])]),a._v(" "),t("li",[t("p",[a._v("-e, –env：设置环境变量(指定宿主机的那个环境变量传到容器中)")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd -e "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("JAVA_HOME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/local/jdk java:8\n")])])])]),a._v(" "),t("li",[t("p",[a._v("-p, –publish list：发布容器端口到主机")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd -p "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("88")]),a._v(":80 nginx\n")])])])]),a._v(" "),t("li",[t("p",[a._v("-P, –publish-all：发布容器所有EXPOSE的端口到宿主机随机端口")])]),a._v(" "),t("li",[t("p",[a._v("--name string：指定容器名称")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd -name sone java:8\n")])])])]),a._v(" "),t("li",[t("p",[a._v("-h, –hostname：设置容器主机名")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd -h java8 java:8\n")])])])]),a._v(" "),t("li",[t("p",[a._v("-ip string：指定容器IP，只能用于自定义网络")])]),a._v(" "),t("li",[t("p",[a._v("--network：连接容器到一个网络")])]),a._v(" "),t("li",[t("p",[a._v("--mount mount：将文件系统附加到容器")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd --mount "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("src")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("nginx-l,dst"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("/usr/share/nginx/html nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##创建容器时挂载数据卷，src=数据卷名,dst=要挂载的容器中的路径")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("-v, –volume list：绑定挂载一个卷")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker contaier run -itd -v nginx-l:/usr/share/nginx/html nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##创建容器时挂载数据卷，卷名:要挂载的容器中的路径")]),a._v("\n")])])])]),a._v(" "),t("li",[t("p",[a._v("--restart string：容器退出时重启策略，需要容器docker启动自启容器，可以加这个选项，默认no，可选值：[always|on-failure]")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd --restart"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("always java:8\n")])])])])]),a._v(" "),t("h2",{attrs:{id:"容器资源限制选项"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器资源限制选项"}},[a._v("#")]),a._v(" 容器资源限制选项")]),a._v(" "),t("p",[a._v("-m，–memory：容器可以使用的最大内存量")]),a._v(" "),t("p",[a._v("--memory-swap：允许交换到磁盘的内存量,类型容器版的swap虚拟内存")]),a._v(" "),t("p",[a._v("--memory-swappiness=：容器使用SWAP分区交换的百分比（0-100，默认为-1）")]),a._v(" "),t("p",[a._v("–oom-kill-disable：禁用OOM Killer")]),a._v(" "),t("p",[a._v("--cpus：限制可以使用的CPU数量")]),a._v(" "),t("p",[a._v("--cpuset-cpus：限制容器使用特定的CPU核心，如(0-3, 0,1)")]),a._v(" "),t("p",[a._v("--cpu-shares：CPU共享(相对权重)")]),a._v(" "),t("h3",{attrs:{id:"实例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("p",[t("strong",[a._v("创建一个容器，限制内存最多只能使用500m")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd --memory"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"500m"')]),a._v(" nginx\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##创建容器")]),a._v("\n\ndocker container stats 容器ID\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 查看容器的资源使用，在这命令中可以查看限制的内存")]),a._v("\n")])])]),t("p",[t("strong",[a._v("创建一个容器，限制CPU，最多只能使用一个半的CPU")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd --cpus"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"1.5"')]),a._v(" nginx\n")])])]),t("p",[t("strong",[a._v("创建一个容器，限制CPU，最多只能使用半个的CPU")])]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container run -itd --cpus"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('".5"')]),a._v(" nginx\n")])])]),t("h1",{attrs:{id:"容器常用的管理命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#容器常用的管理命令"}},[a._v("#")]),a._v(" 容器常用的管理命令")]),a._v(" "),t("h2",{attrs:{id:"查看容器-ls"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看容器-ls"}},[a._v("#")]),a._v(" 查看容器 - ls")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n选项：-a\n      docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" -a \n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##-a选项：列出所有的容器，包含以停止的容器")]),a._v("\n")])])]),t("h2",{attrs:{id:"查看一个或多个容器详细信息-inspect"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看一个或多个容器详细信息-inspect"}},[a._v("#")]),a._v(" 查看一个或多个容器详细信息 - inspect")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container inspect 容器ID\n")])])]),t("h2",{attrs:{id:"在运行容器中执行命令-exec"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#在运行容器中执行命令-exec"}},[a._v("#")]),a._v(" 在运行容器中执行命令 - exec")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" 容器ID 命令\n")])])]),t("h2",{attrs:{id:"进入容器内部-exec-it"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进入容器内部-exec-it"}},[a._v("#")]),a._v(" 进入容器内部 - exec -it")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" -it 容器ID bash/sh\n")])])]),t("h2",{attrs:{id:"将容器保存成一个新的镜像-commit"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#将容器保存成一个新的镜像-commit"}},[a._v("#")]),a._v(" 将容器保存成一个新的镜像 - commit")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container commit 容器ID\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##创建一个新镜像来自一个容器")]),a._v("\n")])])]),t("h2",{attrs:{id:"拷贝文件-文件夹到一个容器-cp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拷贝文件-文件夹到一个容器-cp"}},[a._v("#")]),a._v(" 拷贝文件/文件夹到一个容器 - cp")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v("\n")])])]),t("h3",{attrs:{id:"实例-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-2"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" anaconda-ks.cfg 838dc2e585ae:/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##从宿主机当前目录拷贝一个文件到容器中的根目录中")]),a._v("\n\ndocker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" 838dc2e585ae:/anaconda-ks.cfg ./a\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##从容器中的根目录下拷贝一个文件到宿主机的当前目录中，并改名为a")]),a._v("\n\ndocker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" sa 838dc2e585ae:/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##从宿主机当前目录拷贝一个目录到容器中的根目录中")]),a._v("\n")])])]),t("h2",{attrs:{id:"获取一个容器日志-logs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#获取一个容器日志-logs"}},[a._v("#")]),a._v(" 获取一个容器日志 - logs")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container logs 容器ID\n选项：\n      docker container logs 容器ID -f\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##跟tail -f 命令的效果一样，实时输出日志")]),a._v("\n")])])]),t("h2",{attrs:{id:"列出或指定容器端口映射-port"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#列出或指定容器端口映射-port"}},[a._v("#")]),a._v(" 列出或指定容器端口映射 - port")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container port 容器ID\n")])])]),t("h2",{attrs:{id:"显示一个容器运行的进程-top"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#显示一个容器运行的进程-top"}},[a._v("#")]),a._v(" 显示一个容器运行的进程 - top")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("top")]),a._v(" 容器ID\n")])])]),t("h2",{attrs:{id:"显示容器资源使用统计-stats"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#显示容器资源使用统计-stats"}},[a._v("#")]),a._v(" 显示容器资源使用统计 - stats")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container stats 容器ID\n")])])]),t("h2",{attrs:{id:"停止一个或多个容器-stop"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#停止一个或多个容器-stop"}},[a._v("#")]),a._v(" 停止一个或多个容器 - stop")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container stop 容器ID\ndocker container stop 容器ID 容器ID\n")])])]),t("h2",{attrs:{id:"启动一个或多个容器-start"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动一个或多个容器-start"}},[a._v("#")]),a._v(" 启动一个或多个容器 - start")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container start 容器ID\ndocker container start 容器ID 容器ID\n")])])]),t("h2",{attrs:{id:"重启一个或多个容器-restart"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启一个或多个容器-restart"}},[a._v("#")]),a._v(" 重启一个或多个容器 - restart")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container restart 容器ID\ndocker container restart 容器ID 容器ID\n")])])]),t("h2",{attrs:{id:"删除一个或多个容器-rm"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#删除一个或多个容器-rm"}},[a._v("#")]),a._v(" 删除一个或多个容器 - rm")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" 容器ID\ndocker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" 容器ID 容器ID\n选项：-f\n\tdocker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -f 容器ID\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("## 强制删除")]),a._v("\n")])])]),t("h3",{attrs:{id:"实例-3"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#实例-3"}},[a._v("#")]),a._v(" 实例")]),a._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[a._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" -a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("awk")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'{print $1}'")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##删除所有容器，包含以停止的容器")]),a._v("\n\ndocker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" -f "),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$(")]),a._v("docker container "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v(" -a -q"),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v(")")])]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("##删除所有容器，包含以停止的容器")]),a._v("\n")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);